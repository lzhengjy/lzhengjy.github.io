<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://lzhengjy.github.io/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zheng">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://lzhengjy.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Docker" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/12/13/Docker/" class="article-date">
  <time class="dt-published" datetime="2023-12-13T14:45:59.000Z" itemprop="datePublished">2023-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/12/13/Docker/">Docker</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>该笔记是根据<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1HP4118797/?share_source=copy_web&vd_source=db8e7458ec195ac74979ce5478cbc624">B站视频</a>学习编写</p>
<h3 id="1-什么是Docker"><a href="#1-什么是Docker" class="headerlink" title="1. 什么是Docker"></a>1. 什么是Docker</h3><p>Docker 是一个用于构建、部署和管理容器化应用的开源平台。这些容器是标准化的可执行组件，结合了应用源代码以及在任何环境中运行该代码所需的操作系统 (OS) 库和依赖项。</p>
<p><strong>Docker的作用：</strong></p>
<ul>
<li>轻量级的虚拟化：Docker 容器提供了一种轻量级的虚拟化方式，相较于传统的虚拟机，Docker 容器启动速度更快，占用资源更少</li>
<li><strong>环境一致性</strong>：Docker 可以让开发者打包他们的应用以及依赖包到一个可移植的容器中，这样就可以确保应用在不同环境中的一致性</li>
<li><strong>提高资源利用率</strong>：开发人员使用容器在硬件上运行的应用副本数量是使用虚拟机的数倍。这可以减少云支出</li>
<li><strong>提高开发效率</strong>：Docker 容器化应用可以“一次编写，随处运行”。与虚拟机相比，容器的部署、配置和重启过程更迅速且更简单</li>
<li><strong>快速交付软件</strong>：Docker 可以让你将应用程序与基础架构分开，从而可以快速交付软件。你可以大大减少编写代码和在生产环境中运行代码之间的延迟</li>
</ul>
<br>



<hr>
<h3 id="2-安装Docker"><a href="#2-安装Docker" class="headerlink" title="2. 安装Docker"></a>2. 安装Docker</h3><p><strong>卸载旧版</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">	docker-client \</span><br><span class="line">	docker-ciient-latest \</span><br><span class="line">	docker-common \</span><br><span class="line">	docker-latest \</span><br><span class="line">	docker-latest-logrotate \</span><br><span class="line">	docker-logrotate \</span><br><span class="line">	docker-engine</span><br></pre></td></tr></table></figure>

<br>



<p><strong>配置Docker的yum库</strong></p>
<p>安装一个yun工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils</span><br></pre></td></tr></table></figure>

<p>安装完毕后，执行命令，配置Docker的yum源</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<p>安装Docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure>

<br>



<p><strong>启动和校验</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 启动docker</span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"># 停止docker</span><br><span class="line">systemctl stop docker</span><br><span class="line"></span><br><span class="line"># 重启</span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line"># 开机自启</span><br><span class="line">systemctl enable docker</span><br><span class="line"></span><br><span class="line"># 执行docker ps命令，如果不报错说明启动成功了</span><br></pre></td></tr></table></figure>

<br>



<hr>
<h3 id="3-快速入门"><a href="#3-快速入门" class="headerlink" title="3. 快速入门"></a>3. 快速入门</h3><p>使用Docker来安装MySQL，先停掉Linux中的MySQL</p>
<p>安装MySQL的指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">	--name mysql \</span><br><span class="line">	-p 3306:3306 \</span><br><span class="line">	-e TZ=Asia/Shanghai \</span><br><span class="line">	-e MYSQL_ROOT_PASSWORD=020427 \</span><br><span class="line">	mysql</span><br></pre></td></tr></table></figure>

<br>

<p>可以通过本机电脑连接到虚拟机的MySQL</p>
<img src="/2023/12/13/Docker/image-20231217205124016.png" alt="image-20231217205124016" style="zoom:67%;">

<p><img src="/2023/12/13/Docker/image-20231217205218810.png" alt="image-20231217205218810"></p>
<p>当我们利用Docker安装应用时，Docker会自动搜索并下载应用镜像。镜像不仅包含应用本身，还包含应用运行所需要的环境、配置、系统函数库。Docker会在运行镜像时创建一个隔离环境，称为容器</p>
<p>Docker官网维护的公共<strong>镜像仓库</strong>：<a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub Container Image Library | App Containerization</a></p>
<img src="/2023/12/13/Docker/image-20231217204228958.png" alt="image-20231217204228958" style="zoom: 50%;">

<br>



<p><strong>命令解读</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">	--name mysql \</span><br><span class="line">	-p 3306:3306 \</span><br><span class="line">	-e TZ=Asia/Shanghai \</span><br><span class="line">	-e MYSQL_ROOT_PASSWORD=123 \</span><br><span class="line">	mysql</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>docker run</strong> ：创建并运行一个容器，**-d**是让容器在后台运行</li>
<li><strong>–name mysql</strong> ：给容器起一个名字，必须唯一</li>
<li><strong>-p 3306:3306</strong> ：设置端口映射，前面是主机端口，后面是容器端口</li>
<li><strong>-e KEY&#x3D;VALUE</strong> : 设置环境变量，不同的容器需要不同的环境变量，可以在Docker的镜像仓库查看有容器哪些环境变量</li>
<li><strong>mysql</strong> ：指定运行的镜像名字，镜像名称一般由两部分组成：[repository]:[tag]<ul>
<li>repository是镜像名</li>
<li>tag是版本号</li>
<li>如果没有版本号则默认是最新版本的镜像</li>
</ul>
</li>
</ul>
<br>



<hr>
<h3 id="4-常见命令"><a href="#4-常见命令" class="headerlink" title="4. 常见命令"></a>4. 常见命令</h3><p>Docker最常见的命令就是操作镜像和容器，详情见<a target="_blank" rel="noopener" href="https://docs.docker.com/">官方文档</a></p>
<img src="/2023/12/13/Docker/image-20231218163616881.png" alt="image-20231218163616881" style="zoom:67%;">

<ul>
<li>docker pull：从镜像仓库拉取或更新指定镜像</li>
<li>docker pull：把本地镜像推送到远程镜像仓库中去</li>
<li>docker images：列出本地存储的所有docker镜像</li>
<li>docker rmi：从主机节点中删除一个或多个镜像，-f是强制删除</li>
<li>docker build：根据DockerFile和context来自定义docker镜像</li>
<li>docker save：把打包好的镜像以压缩包的形式保存到本地</li>
<li>docker load：把压缩文件加载在本地镜像中</li>
<li>docker run：创建一个新的容器并运行</li>
<li>docker stop：停止容器</li>
<li>docker start：启动容器</li>
<li>docker logs：获取容器的日志</li>
<li>docker exec：通过这个命令可以在不需要进入容器的情况下直接与容器内的环境进行交互</li>
<li>docker ps：列出正在运行的docker容器,-a是显示所有容器包括未运行的</li>
<li>docker rm：删除一个或多个容器，添加-f可以强制删除正在运行的容器</li>
</ul>
<br>



<hr>
<h3 id="5-数据卷挂载"><a href="#5-数据卷挂载" class="headerlink" title="5. 数据卷挂载"></a>5. 数据卷挂载</h3><p><strong>数据卷</strong>是一种用于持久化存储容器数据的机制，它是一个可供一个或多个容器使用的特殊目录，绕过了联合文件系统，有很多特性：</p>
<ul>
<li>数据卷可以在容器之间共享和重用</li>
<li>对数据卷的修改会立马生效</li>
<li>对数据卷的更新不会影响镜像</li>
<li>数据卷默认会一直存在，即使容器被删除、</li>
</ul>
<br>



<p><strong>数据卷挂载</strong>是将宿主机的数据卷挂载到Docker容器中的目录中（&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes），数据卷目录由Docker管理。这样做的好处是容器可以直接访问和使用这些数据，而且这些数据在容器之间是可以共享的</p>
<p>Docker提供了两种挂载方式，<code>-v</code>和<code>-mount</code></p>
<br>



<p>数据卷是容器内目录和宿主机目录之间映射的桥梁</p>
<img src="/2023/12/13/Docker/image-20231220161446653.png" alt="image-20231220161446653" style="zoom: 50%; ">

<br>



<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">docker volume create</td>
<td align="center">创建数据卷</td>
</tr>
<tr>
<td align="center">docker volume ls</td>
<td align="center">查看所有数据卷</td>
</tr>
<tr>
<td align="center">docker volume rm</td>
<td align="center">删除指定数据卷</td>
</tr>
<tr>
<td align="center">docker volume Inspect</td>
<td align="center">查看某个数据卷的详情</td>
</tr>
<tr>
<td align="center">docker volume prune</td>
<td align="center">清除数据卷</td>
</tr>
</tbody></table>
<br>



<p><strong>通过案例——利用Nginx容器部署静态资源来实现数据卷的挂载</strong></p>
<p>需求：</p>
<ul>
<li>创建Nginx容器，修改nginx容器内的html目录下的index.html文件内容</li>
<li>将静态资源部署到nginx的html目录</li>
</ul>
<br>



<p>当容器创建时，如果挂载了数据卷且数据卷不存在，会自动创建数据卷</p>
<p>在执行docker run命令时，使用**-v 数据卷:容器内目录**可以完成数据卷挂载</p>
<br>



<p><img src="/2023/12/13/Docker/image-20231220164110981.png" alt="image-20231220164110981"></p>
<ul>
<li>通过docker run -d –name nginx -p 180:180 -v html:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html nginx 创建并运行一个容器，并挂载数据卷</li>
<li>html:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html   html容器名， &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html要挂载的容器中的目录</li>
<li>docker volume ls 查看所有数据卷</li>
<li>docker volume inspect html 查看html数据卷的详细信息</li>
<li>Mountpoint 挂载在宿主机中的位置</li>
</ul>
<p>这时候想修改nginx容器中的html目录下的文件只需要在宿主机中对应的文件中（MountPoint）修改就可以了</p>
<br>



<hr>
<h3 id="6-本地目录挂载"><a href="#6-本地目录挂载" class="headerlink" title="6. 本地目录挂载"></a>6. 本地目录挂载</h3><p>本地目录挂载是指将设备文件中的顶级目录连接到Linux跟目录下的某一目录（最好是空目录），访问此目录就等同于访问设备文件。这个过程称为“挂载”</p>
<p>并不是根目录下任何一个目录都可以作为挂载点，由于挂载操作会使得原有目录中文件被隐藏，因此根目录以及系统原有目录都不要作为挂载点，会造成系统异常甚至崩溃，挂载点最好是新建的空目录</p>
<br>

<ul>
<li>在执行docker run 命令时，使用**-v 本地目录:容器内目录**可以完成本地目录挂载</li>
<li>本地目录必须以<code>/</code>或<code>./</code>开头，如果直接以名称开头会被识别为数据卷而非本地目录<ul>
<li>-v mysql:&#x2F;var&#x2F;lib&#x2F;mysql会被识别为一个名为mysql的数据卷</li>
<li>-v &#x2F;mysql:&#x2F;var&#x2F;lib&#x2F;mysql会被识别为当前目录下的mysql目录</li>
</ul>
</li>
</ul>
<br>



<hr>
<h3 id="7-自定义镜像"><a href="#7-自定义镜像" class="headerlink" title="7. 自定义镜像"></a>7. 自定义镜像</h3><p><strong>镜像结构</strong></p>
<p>镜像中包含了应用程序所需要的运行环境、函数库、配置、以及应用本身等各种文件，这些文件分层打包</p>
<img src="/2023/12/13/Docker/image-20231223170500748.png" alt="image-20231223170500748" style="zoom: 67%;">

<br>




<p><strong>DockerFile</strong><br>DockerFile是一个文本文件，其中包含一个个的指令，用来说明要执行什么操作来构建镜像</p>
<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">说明</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">FROM</td>
<td align="center">指定基础镜像</td>
<td align="center">FROM centos:7</td>
</tr>
<tr>
<td align="center">ENV</td>
<td align="center">设置环境变量</td>
<td align="center">ENV key value</td>
</tr>
<tr>
<td align="center">COPY</td>
<td align="center">拷贝本地文件到镜像的指定目录</td>
<td align="center">COPY .&#x2F;jrell.tar.gz &#x2F;tmp</td>
</tr>
<tr>
<td align="center">RUN</td>
<td align="center">执行Linux的shell命令，一般是安装过程的命令</td>
<td align="center">RUN tar -zxvf &#x2F;tmp&#x2F;jrell.tar.gz &amp;&amp; EXPORTS path&#x3D;&#x2F;tmp&#x2F;jrell:$path</td>
</tr>
<tr>
<td align="center">EXPOSE</td>
<td align="center">指定容器运行时监听的端口</td>
<td align="center">EXPOSE 8080</td>
</tr>
<tr>
<td align="center">ENTRYPOINT</td>
<td align="center">镜像中应用的启动命令，容器运行时调用</td>
<td align="center">ENTRYPOINT java -jar xx.jar</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder">官方文档</a></p>
<br>



<p><strong>案例</strong></p>
<p>基于JDK为基础镜像，省略前面步骤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 基础镜像</span><br><span class="line">FROM openjdk:8.0-jre-buster</span><br><span class="line"># 拷贝jar包</span><br><span class="line">COPY docker-demo.jar /app.jar</span><br><span class="line"># 入口</span><br><span class="line">ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]</span><br></pre></td></tr></table></figure>

<br>



<p><strong>自定义镜像</strong></p>
<p>当编写好DockerFile，可以利用下面命令来构建镜像：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t myImage:1.0 .</span><br></pre></td></tr></table></figure>

<ul>
<li>-t ：是给镜像起名，格式是repository:tag的格式，不指定tag时，默认为latest</li>
<li>. ：是指定Docker所在目录，如果就在当前目录，则指定为”.”</li>
</ul>
<br>



<hr>
<h3 id="8-Docker网络"><a href="#8-Docker网络" class="headerlink" title="8. Docker网络"></a>8. Docker网络</h3><p>Docker网络是Docker容器之间以及容器和宿主机之间的网络连接的一种机制。在Docker中，每个容器都可以有自己的网络栈，包括网络接口、IP地址和网络配置。Docker网络提供了一种简单、可扩展的方式来组织和管理容器，使得它们可以在同一个网络中进行通信。Docker提供了几种网络模式，包括bridge、host、none和container。</p>
<ul>
<li><strong>Bridge模式</strong>：在该模式中，Docker守护进程创建了一个虚拟以太网桥docker0，新建的容器会自动桥接到这个接口，附加在其上的任何网卡之间都能自动转发数据包。</li>
<li><strong>Host模式</strong>：采用host网络模式的Docker容器，可以直接使用宿主机的IP地址与外界进行通信。</li>
<li><strong>None模式</strong>：none网络模式即不为Docker容器创建任何的网络环境，容器内部就只能使用loopback网络设备。</li>
<li><strong>Container模式</strong>：处于这个模式下的Docker容器会共享一个网络栈，这样两个容器之间可以使用localhost高效快速通信</li>
</ul>
<p><strong>默认情况下、所有容器都是以bridge方式连接到Docker的一个虚拟网桥上</strong></p>
<img src="/2023/12/13/Docker/image-20231223202118445.png" alt="image-20231223202118445" style="zoom:67%;">

<br>



<p>默认分配的容器ip地址是不固定的，服务器重启或者其它操作都有可以是容器的ip地址发生变化，所以需要加入自定义网络</p>
<p>加入自定义网络的容器才可以通过容器名互相访问，Docker的网络操作命令如下：</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">docker network create</td>
<td align="center">创建一个网络</td>
</tr>
<tr>
<td align="center">docker network ls</td>
<td align="center">查看所有网络</td>
</tr>
<tr>
<td align="center">docker network rm</td>
<td align="center">删除指定网络</td>
</tr>
<tr>
<td align="center">docker network prune</td>
<td align="center">清除未使用的网络</td>
</tr>
<tr>
<td align="center">docker network connect</td>
<td align="center">使指定容器连接加入某网络</td>
</tr>
<tr>
<td align="center">docker network disconnect</td>
<td align="center">使指定容器连接离开某网络</td>
</tr>
<tr>
<td align="center">docker network inspect</td>
<td align="center">查看网络详细信息</td>
</tr>
</tbody></table>
<br>



<p>创建一个自定义网络</p>
<img src="/2023/12/13/Docker/image-20231223203413708.png" alt="image-20231223203413708" style="zoom:80%;">

<br>



<p>把mysql容器加入自定义网络中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network connect zheng mysql</span><br></pre></td></tr></table></figure>

<p>通过docker inspect mysql查看mysql容器的网络</p>
<img src="/2023/12/13/Docker/image-20231223204110631.png" alt="image-20231223204110631" style="zoom:80%;">

<p>可以看见已经把容器添加到自定义网络中了</p>
<br>



<p>在创建容器时就加入自定义网络</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name nginx -p 8081:8081 --network zheng nginx</span><br></pre></td></tr></table></figure>



<img src="/2023/12/13/Docker/image-20231223205249964.png" alt="image-20231223205249964" style="zoom: 80%;">

<br>



<p>然后就这两个容器就可以通过名字互相ping了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/12/13/Docker/" data-id="clywa1f3t0001ecve26u9cova" data-title="Docker" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-InnoDB引擎" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/" class="article-date">
  <time class="dt-published" datetime="2023-12-02T13:47:13.000Z" itemprop="datePublished">2023-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/">InnoDB引擎</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>该笔记是基于b站视频学习制作:<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=133&vd_source=db8e7458ec195ac74979ce5478cbc624">MySQL数据库入门到精通</a></p>
<br>



<hr>
<h4 id="1-概念"><a href="#1-概念" class="headerlink" title="1. 概念"></a>1. 概念</h4><p><strong>意义：</strong></p>
<ul>
<li>InnoDB是MySQL的一种存储引擎，它是MySQL 8.0的默认存储引擎。InnoDB存储引擎的主要特点是支持事务处理、回滚、崩溃修复能力和多版本并发控制的事务安全。它也是MySQL上第一个提供外键约束的表引擎</li>
<li>InnoDB存储引擎的设计目标是在高可靠性和高性能之间取得平衡。它将数据划分为若干页，以页作为磁盘与内存交互的基本单位，一般页的大小为16KB。这样的设计可以减少内存与磁盘的交互次数，从而提升性能</li>
<li>此外，InnoDB还支持ACID事务，即原子性、一致性、隔离性、持久性。这些特性使得InnoDB在处理事务方面具有优势</li>
<li>总的来说，InnoDB存储引擎在MySQL中的应用非常广泛，它的存在使得MySQL能够更好地处理复杂的事务和保证数据的安全性。如果你想查看自己的数据库默认使用的存储引擎，可以通过使用命令<code>SHOW VARIABLES LIKE &#39;storage_engine&#39;;</code></li>
</ul>
<br>





<p><strong>作用：</strong></p>
<ul>
<li><strong>事务处理</strong>：InnoDB支持ACID事务，即原子性、一致性、隔离性、持久性。这些特性使得InnoDB在处理事务方面具有优势</li>
<li><strong>数据完整性</strong>：InnoDB是MySQL上第一个提供外键约束的表引擎，这有助于保证数据的完整性和一致性</li>
<li><strong>并发控制</strong>：InnoDB使用多版本并发控制(MVCC)来处理并发操作，这可以提高数据库的并发处理能力</li>
<li><strong>崩溃恢复</strong>：InnoDB具有崩溃恢复能力，可以在系统崩溃后恢复数据，保证数据的安全性</li>
<li><strong>性能优化</strong>：InnoDB将数据划分为若干页，以页作为磁盘与内存交互的基本单位，一般页的大小为16KB。这样的设计可以减少内存与磁盘的交互次数，从而提升性能</li>
</ul>
<br>





<hr>
<h4 id="2-逻辑存储结构"><a href="#2-逻辑存储结构" class="headerlink" title="2. 逻辑存储结构"></a>2. 逻辑存储结构</h4><img src="/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/image-20231202215131646.png" alt="image-20231202215131646" style="zoom:67%;">

<ul>
<li>表空间（ibd文件）：一个MySQL实例可以对应多个表空间，用于存储记录、索引等数据</li>
<li>段：分为数据段（Leaf node segment）、段索引（Non-leaf node segment）、回滚段（Rollback segment），InnoDB是索引组织表，数据段就是B+树的叶子节点，索引段即为B+树的非叶子节点。段用来管理多个Extent（区）</li>
<li>区：表空间的单元结构，每个区的大小为1M。默认情况下，InnoDB存储引擎页大小为16K，即一个区中一共有64个连续的页</li>
<li>页：是InnoDB存储引擎磁盘管理的最小单元，每个页的大小默认为16KB。为了保证页的连续性，InnoDB存储引擎每次从磁盘申请4-5个区</li>
<li>行：InnoDB存储引擎数据是按行进行存放的<ul>
<li>Trx_id：每次对某条记录进行改动时，都会把对应的事务id赋值为trx_id隐藏列</li>
<li>Roll_pointer：每次对某条引记录进行改动时，都会把旧的版本写入到undo日志中，然后这个隐藏列就相当于一个指针，可以通过它来找到该记录修改前的信息</li>
</ul>
</li>
</ul>
<br>



<hr>
<h4 id="3-内存结构"><a href="#3-内存结构" class="headerlink" title="3. 内存结构"></a>3. 内存结构</h4><p>MySQL 5.5版本开始就默认使用InnoDB作为存储引擎，它擅长事务处理，具有崩溃恢复特性。下面是InnoDB架构图，左侧为内存结构，右侧为磁盘结构</p>
<img src="/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/image-20231203140524143.png" alt="image-20231203140524143" style="zoom:67%;">

<br>



<ul>
<li>Buffer Pool: 缓冲池是主内存中的一个区域，里面可以缓存磁盘上一些经常操作的真实数据，在执行增删改查操作时，先操作缓冲池中的数据，若缓冲池没有数据，则从磁盘中加载并缓存。然后再以一定频率刷新到磁盘，从而减少磁盘IO，加快处理速度</li>
<li>缓冲池以Page页为单位，底层采用链表数据结构管理Page。根据状态，将Page分为三种类型：<ul>
<li>free page：空闲page，未被使用</li>
<li>clean page：被使用page，数据没有被修改过</li>
<li>dirty page：脏页：没使用page，数据被修改过</li>
</ul>
</li>
<li>Change Buffer：更改缓冲区（针对于非唯一二级索引页），在执行DML语句（增删改）时，如果这些数据Page没有在Buffer Pool中，则不会直接操作数据库，而是将数据变更存在Change Buffer中，在未来数据被读取的时候，再将数据合并到Buffer Pool中，任何再将合并后的数据刷新到磁盘中去<ul>
<li>Change Buffer存在的意义：<ul>
<li>在InnoDB存储引擎中，change buffer的存在有着重要的意义。当索引字段内容发生更新时（例如update、insert、delete），如果对应的索引页在Buffer Pool中命中，就会直接更新缓存页。否则，InnoDB会将这些更新操作缓存在change buffer中，这样就无需从硬盘读入索引页。下次查询索引页时，会将索引页读入Buffer Pool，然后将change buffer中的操作应用到对应的缓存页，得到最新结果，这个过程称为merge。通过这种方式，可以保证数据逻辑的正确性。</li>
<li>此外，change buffer还有助于减少硬盘随机IO读取和提高内存利用率，从而提升数据库的并发能力。为了防止异常宕机丢失缓存，当事务提交时，InnoDB会将change buffer记录的内容持久化到磁盘（redo log），等待时机更新磁盘的数据文件（刷脏）。因此，change buffer在内存中，如果万一MySQL实例挂了或宕机了，这次的更新操作不会全部丢失。最后，MySQL可以通过ibdata1或redolog恢复change buffer。</li>
<li>总的来说，change buffer的存在可以提升索引性能，减少硬盘随机IO读取，提高内存利用率，以及保证数据逻辑</li>
</ul>
</li>
</ul>
</li>
<li>Adaptive Hash Index：自适应hash索引，用于优化Buffer Pool数据的查询。InnoDB存储引擎会监控对表上各索引页的查询，如果观察到hash索引可以提升速度，则建立hash索引，称之为自适应hash索引</li>
<li>Log Buffer：日志缓冲区，用来保存要写入到磁盘中的log日志数据（redo log、 undo log），默认大小为16MB，日志缓冲区的日志会定期刷新到磁盘中。如果需要更新、插入或者删除许多行的事务，增加日志缓冲区的大小可以节省磁盘I&#x2F;O。有两个参数如下：<ul>
<li>innodb_log_buffer_size：缓冲区大小</li>
<li>innodb_flush_log_at_trx_commit：日志刷新磁盘时机。有0,1,2三个值<ul>
<li>1：日志在每次事务提交时写入并刷新到磁盘（默认值）</li>
<li>0：日志每次将日志写入并刷新到磁盘一次</li>
<li>2：日志在每次事务提交后写入、并每秒刷新到磁盘一次</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>





<hr>
<h4 id="4-磁盘结构"><a href="#4-磁盘结构" class="headerlink" title="4. 磁盘结构"></a>4. 磁盘结构</h4><img src="/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/image-20231203140612885.png" alt="image-20231203140612885" style="zoom: 67%;">

<ul>
<li><code>System Tablespace</code>：（系统表空间）是存储区域，用于存储<code>doublewriter buffer</code>（双写缓冲区）和<code>change buffer</code>（变更缓冲区）。如果用户创建的表在系统表空间中创建，而不是在文件每表或者通用表空间中创建，那么系统表空间也可能包含表和索引数据，在以前的MySQL版本中，系统表空间包含了InnoDB数据字典</li>
<li><code>File-Per-Table Tablespaces</code>：（每表一个文件的表空间）是一种数据存储方式。当启用了<code>innodb_file_per_table</code>配置选项时，每个InnoDB表和它的索引会被单独存储在<code>.ibd</code>数据文件中。这个<code>.ibd</code>数据文件代表一个单独的表空间</li>
<li><code>General Tablespaces</code>：（通用表空间）是一种可以存储多个表数据的共享表空间。它是使用CREATE TABLESPACE语法创建的</li>
<li><code>Undo Tablespaces</code>:（撤销表空间）包含撤销日志，这些日志是包含有关如何撤销事务对聚簇索引记录的最新更改的信息的记录集合。MySQL实例在初始化时会自动创建两个默认的表空间（初始大小16M），用于存储undo log日志</li>
<li><code>Temporary Tablespaces</code>：（临时表空间）是数据库中用于存储临时数据的空间</li>
<li><code>Doublewrite Buffer Files:</code>（双写缓冲区）InnoDB引擎将数据页从Buffer Pool刷新到磁盘前，先将数据页写入双写缓冲区中，便于系统异常时恢复数据</li>
<li><code>Redo Log：</code>（重做日志），是用来实现事务的持久性。该日志由两部分组成：重做日志缓冲（redo log buffer）和重做日志文件（redo log file），前者是在内存中，后者在磁盘中。当事务提交之后会把所有的修改信息存储在该日志中</li>
</ul>
<br>



<hr>
<h3 id="5-后台线程"><a href="#5-后台线程" class="headerlink" title="5. 后台线程"></a>5. 后台线程</h3><p>​                                                                                               </p>
<p><strong>Master Thread</strong></p>
<p>核心后台线程，负责调度其他线程，还负责将缓冲池中的数据异步刷新到磁盘中去，保持数据的一致性，还包括赃页的刷新、合并插入缓存、undo页的回收</p>
<br>



<p><strong>IO Thread</strong></p>
<p>在InnoDB存储引擎中大量使用了AIO来处理IO请求，这样可以极大地提高数据库的性能，而IO Thread主要负责这些IO请求的回调</p>
<br>



<p><strong>Purge Thread</strong></p>
<p>主要用于回收事务已经提交了的undo log，在事务提交之后，undo log可能不用了，就用它来回收</p>
<br>



<p><strong>Page Cleaner Thread</strong></p>
<p>协助Master Thread刷新赃页到磁盘的线程，它可以减轻Master Thread的工资压力，减少阻塞</p>
<br>





<hr>
<h3 id="6-事务原理"><a href="#6-事务原理" class="headerlink" title="6. 事务原理"></a>6. 事务原理</h3><p><strong>事务：</strong>事务是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或者撤销操作请求，即这些操作要么同时成功，要么同时失败</p>
<br>



<p><strong>特性：</strong></p>
<ul>
<li><strong>原子性（Atomicity）：</strong>事务是不可分割的最小操作单元，要么全部成功，要么全部失败</li>
<li><strong>一致性（Consistency）：</strong>事务完成时，必须使所有的数据都保持一致</li>
<li><strong>隔离性（Isolation）：</strong>数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</li>
<li><strong>持久性（Durability）：</strong>事务一旦提交或者回滚，它对数据库中的数据的改变是永久的</li>
</ul>
<br>



<p>redo log 和 undo log 保证了事务的原子性、一致性和持久性<br>锁和MVCC保证了隔离性</p>
<br>



<p><strong>redo log</strong></p>
<p>重做日志，记录的是事务提交时数据页的物理修改，是用来实现事务的持久性</p>
<p>该日志由两部分组成：重做日志缓冲（redo log buffer）和重做日志文件（redo log file），前者是在内存中，后者在磁盘中。当事务提交之后会把所有的修改信息存储在该日志中，用于在刷新赃页到磁盘，发生错误时，进行数据恢复</p>
<img src="/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/image-20231213202354900.png" alt="image-20231213202354900" style="zoom: 80%;">

<br>



<p><strong>undo log</strong></p>
<p>回滚日志，用于记录数据被修改前的信息，作用主要有两个：提供回滚和MVCC</p>
<p>undo log是逻辑日志，它记录的是对数据的操作。当delete一条记录时，undo log中就会记录一条对应的insert记录，当update一条记录时，就会记录一条相反的update日志</p>
<p>undo log销毁：undo log在事务执行时产生，事务提交时，并不会立即删除undo log，因为这些日志可能还用于MVCC</p>
<p>undo log存储：undo log采用段的方式进行管理和记录</p>
<br>



<hr>
<h3 id="7-MVCC"><a href="#7-MVCC" class="headerlink" title="7. MVCC"></a>7. MVCC</h3><p>MVCC，即多版本并发控制（Multi-Version Concurrency Control），是一种数据库管理系统中实现并发访问的方法。它允许在数据库中存在多个数据版本，从而使不同的事务能够同时访问同一数据的不同版本，提高了系统的并发性能。</p>
<br>



<p><strong>当前读</strong></p>
<p>当前读是指读取数据的最新版本，并且在读取的过程中对数据加锁，以防止其他事务同时修改相同的记录。这种读取方式常用于需要保证数据一致性的场景，如更新、删除、插入操作，以及使用select … for update（都是排他锁）或select … lock in share mode（共享锁）进行的查询</p>
<br>



<p><strong>快照读</strong></p>
<p>简单的select（不加锁）就是快照读，快照读读取的是记录数据的可见版本，有可能是历史数据，不加锁，是非阻塞读</p>
<ul>
<li>Read Committed：每次select，都生成一个快照读</li>
<li>Repeatable Read：开启事务后第一个select语句才是快照读的地方</li>
<li>Serializable：快照读会退回为当前读</li>
</ul>
<br>



<p><strong>记录中的隐藏字段</strong></p>
<table>
<thead>
<tr>
<th align="center">隐藏字段</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DB_TRX_ID</td>
<td align="center">最近修改事务ID，记录插入这条记录或者最后一次修改该记录的事务ID</td>
</tr>
<tr>
<td align="center">DB_ROLL_PTR</td>
<td align="center">回滚指针，指向这条记录的是一个版本，用于配合undo log，指向上一个版本</td>
</tr>
<tr>
<td align="center">DB_ROW_ID</td>
<td align="center">隐藏主键，如果表结构没有指定主键，将会生成该隐藏字段（如果有主键就不生成）</td>
</tr>
</tbody></table>
<br>



<p><strong>undo log</strong></p>
<p>回滚日志，在insert、update、delete的时候产生的便于数据回滚的日志</p>
<p>当insert的时候，产生的undo log日志只在回滚时需要，在事务提交后，可被立即删除</p>
<p>而update、delete的时候，产生的undo log日志不仅在回滚时需要，在快照时也需要，不会立即被删除</p>
<br>



<p><strong>undo log版本链</strong></p>
<p>不同事务或相同事务对同一条记录进行修改，会导致该记录的undo log生成一条记录版本链表，链表的头部是最新的旧记录，链表尾部是最早的旧记录</p>
<p>当一个事务对数据进行修改时，它会在undo log中记录下修改前的数据版本，并更新数据记录的<code>DB_TRX_ID</code>和<code>DB_ROLL_PTR</code>。如果另一个事务再次修改这条数据，它也会在undo log中记录下当前的数据版本，并更新<code>DB_ROLL_PTR</code>指向新的undo log。这样通过<code>DB_ROLL_PTR</code>指针串联起来的undo log就形成了一个版本链</p>
<p>这个版本链允许数据库在执行回滚操作时，根据事务的需要找到正确的数据版本，同时它也支持MVCC机制，使得不同的事务可以看到数据的不同历史版本，从而实现非阻塞的读取操作</p>
<br>



<p><strong>ReadView</strong></p>
<p>ReadView（读视图）是快照读SQL执行时MVCC提取数据的依据，记录并维护系统当前活跃的事务（为提交的）id</p>
<p>在数据库系统中，特别是在使用MVCC（多版本并发控制）机制的系统中，ReadView是用来实现不同隔离级别下的一致性读取的关键数据结构。ReadView的生成过程通常与事务的开始和查询操作紧密相关。</p>
<br>



<p><strong>ReadView的生成过程</strong></p>
<ul>
<li><strong>事务开始</strong>：当一个事务开始时，数据库系统会为该事务分配一个唯一的事务ID（trx_id）</li>
<li><strong>活跃事务列表</strong>：系统会维护一个活跃事务列表，其中包含了所有尚未提交的事务的ID</li>
<li><strong>创建ReadView</strong>：在执行查询操作时，系统会创建一个ReadView</li>
<li><strong>确定数据版本可见性</strong>：ReadView会根据事务ID和数据版本的trx_id来确定哪些数据版本对当前事务是可见的</li>
</ul>
<br>



<p>ReadView中包含了四个核心字段</p>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">m_ids</td>
<td align="center">当前活跃的事务ID集合</td>
</tr>
<tr>
<td align="center">min_trx_id</td>
<td align="center">最小活跃事务ID</td>
</tr>
<tr>
<td align="center">max_trx_id</td>
<td align="center">预分配事务ID，最大活跃事务ID+1（事务ID是自增的）</td>
</tr>
<tr>
<td align="center">creator_trx_id</td>
<td align="center">ReadView创建者的事务ID</td>
</tr>
</tbody></table>
<br>



<p><strong>版本链访问规则</strong></p>
<p>trx_id表示的是当前<strong>被访问</strong>版本的ID</p>
<img src="/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/image-20231213223050767.png" alt="image-20231213223050767" style="zoom:67%;">

<ul>
<li>如果被访问版本的<code>trx_id</code>与<code>ReadView</code>中的<code>creator_trx_id</code>值相同，说明当前事务在访问自己修改过的记录，该版本可以被当前事务访问</li>
<li>如果被访问版本的<code>trx_id</code>小于<code>ReadView</code>中的<code>min_trx_id</code>值，说明生成该版本的事务在当前事务生成<code>ReadView</code>前已经提交，该版本可以被当前事务访问</li>
<li>如果被访问版本的<code>trx_id</code>大于或等于<code>ReadView</code>中的<code>max_trx_id</code>值，说明生成该版本的事务在当前事务生成<code>ReadView</code>后才开启，该版本不可以被当前事务访问</li>
<li>如果被访问版本的<code>trx_id</code>值在<code>ReadView</code>的<code>min_trx_id</code>和<code>max_trx_id</code>之间，就需要判断<code>trx_id</code>属性值是否在<code>m_ids</code>列表中。如果在，说明创建<code>ReadView</code>时生成该版本的事务还是活跃的，该版本不可以被访问。如果不在，说明创建<code>ReadView</code>时生成该版本的事务已经被提交，该版本可以被访问</li>
</ul>
<br>



<p>不同的隔离级别，生成的ReadView的时机不同：</p>
<ul>
<li>READ COMMITTED：在事务中每一次执行快照读时生成ReadView</li>
<li>REPEATABLE READ：仅在事务中第一次执行快照读时生成ReadView，后续复用该ReadView</li>
</ul>
<br>



<p><strong>隔离级别为RC下，ReadView的工作原理</strong></p>
<p>RC（读已提交），它是指在这个隔离级别下，一个事务只能读取到其他事务已经提交的修改。这个级别的设计是为了防止脏读现象的发生</p>
<p>在RC隔离级别下，ReadView的工作原理是确保事务只能看到在该事务开始之前已经提交的更改。这是通过每次查询时都创建一个新的ReadView来实现的</p>
<br>



<p><strong>隔离级别为RR下，ReadView的工作原理</strong></p>
<p>RR（可重复读），它是指这个隔离级别下，一个事务在其执行期间可以多次读取同一数据集，并且每次读取的结果都是相同的，即使在这期间其他事务对这些数据进行了修改或更新。这种特性保证了数据的一致性，避免了在一个事务中出现不可重复读的问题</p>
<p>当一个事务在RR隔离级别下开始时，它会创建一个ReadView，这个ReadView相当于是一个数据快照。在整个事务执行期间，无论其他事务如何修改数据，当前事务都只能看到ReadView中的数据版本。这就意味着，即使其他事务提交了更新，当前事务仍然能够读取到它最初看到的数据版本，从而实现了可重复读的效果。</p>
<p>在RR隔离级别下，可以避免不可重复读和幻读，但可能会牺牲一些并发性能。这是因为为了维持数据的一致性，系统需要对数据加锁或使用其他机制来保证在事务执行期间数据不会被其他事务修改。这样的设计是为了在数据一致性和系统性能之间取得平衡。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/12/02/InnoDB%E5%BC%95%E6%93%8E/" data-id="clywa1f3w0003ecvefsoja6ka" data-title="InnoDB引擎" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-SpringBoot3学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2023-11-16T05:18:27.000Z" itemprop="datePublished">2023-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6%E5%92%8C%E4%B8%AD%E9%97%B4%E4%BB%B6/">框架和中间件</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">SpringBoot3学习笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>该笔记基于b站视频<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Es4y1q7Bf/?share_source=copy_web">SpringBoot零基础教程</a>学习完成</p>
<h3 id="1-快速入门"><a href="#1-快速入门" class="headerlink" title="1. 快速入门"></a>1. 快速入门</h3><h4 id="1-1-简介"><a href="#1-1-简介" class="headerlink" title="1.1 简介"></a>1.1 简介</h4><p><strong>环境要求</strong></p>
<table>
<thead>
<tr>
<th>环境&amp;工具</th>
<th>版本（or later）</th>
</tr>
</thead>
<tbody><tr>
<td>SpringBoot</td>
<td>3.0.5+</td>
</tr>
<tr>
<td>IDEA</td>
<td>2021.2.1+</td>
</tr>
<tr>
<td>Java</td>
<td>17+</td>
</tr>
<tr>
<td>Maven</td>
<td>3.5+</td>
</tr>
<tr>
<td>Tomcat</td>
<td>10.0+</td>
</tr>
<tr>
<td>Servlet</td>
<td>5.0+</td>
</tr>
<tr>
<td>GraalVM Community</td>
<td>22.3+</td>
</tr>
<tr>
<td>Native Build Tools</td>
<td>0.9.19+</td>
</tr>
</tbody></table>
<br>



<p><strong>SpringBoot是什么</strong></p>
<p>SpringBoot 帮我们简单、快速地创建一个独立的、生产级别的 <strong>Spring 应用（说明：SpringBoot底层是Spring）</strong>大多数 SpringBoot 应用只需要编写少量配置即可快速整合 Spring 平台以及第三方技术</p>
<p><strong>特性：</strong>简化开发，简化配置，简化整合，简化部署，简化监控，简化运维</p>
<br>



<h4 id="1-2-开发流程"><a href="#1-2-开发流程" class="headerlink" title="1.2 开发流程"></a>1.2 开发流程</h4><p><strong>创建项目</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    所有springboot项目都要继承spring-boot-starter-parent--&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;3.0.5&lt;/version&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br></pre></td></tr></table></figure>

<br>



<p><strong>导入场景</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    web开发场景启动器--&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<br>



<p><strong>主程序</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<p><strong>业务</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello springboot3&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<p><strong>测试</strong></p>
<p>启动项目，默认端口号8080</p>
<p><img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231116151721264.png"></p>
<br>



<p><strong>打包</strong></p>
<p>引入打包插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    springboot应用打包插件--&gt;</span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br></pre></td></tr></table></figure>

<p><code>mvn-clean package</code> 把项目打成可自行的jar包，打包后可以在target中找到</p>
<p><img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231116203134694.png"></p>
<br>



<p><code>java -jar demo.jar</code> 启动项目</p>
<br>



<h4 id="1-3-Spring-Initializr"><a href="#1-3-Spring-Initializr" class="headerlink" title="1.3 Spring Initializr"></a>1.3 Spring Initializr</h4><p>通过Spring Initializr 来创建springboot项目</p>
<img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231116202359617.png" style="zoom: 67%;">

<br>



<p>选择需要的依赖</p>
<img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231116202838044.png" style="zoom:67%;">

<p><img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231116203920906.png" alt="image-20231116203920906"></p>
<br>



<hr>
<h3 id="2-应用分析"><a href="#2-应用分析" class="headerlink" title="2. 应用分析"></a>2. 应用分析</h3><h4 id="2-1-依赖管理机制"><a href="#2-1-依赖管理机制" class="headerlink" title="2.1 依赖管理机制"></a>2.1 依赖管理机制</h4><p>为什么导入<code>starter-web</code>所有相关的依赖都导入进来了？</p>
<ul>
<li>想要开发什么场景、就导入对应的场景启动器（依赖）</li>
<li>maven依赖传递原则，A依赖了B，B又依赖于C，所以A依赖于B和C。所以导入了场景启动器后，在场景启动器中会将所有需要的依赖都导入进来</li>
</ul>
<p>为什么版本号都不用写</p>
<ul>
<li>每个boot项目都会有一个父项目<code>spring-boot-starter-parent</code></li>
<li>parent的父项目是<code>spring-boot-dependencies</code></li>
<li>父项目 版本仲裁中心，把常见的jar的依赖版本都声明号了</li>
</ul>
<p>自定义版本号</p>
<ul>
<li>利用maven的就近原则，在导入依赖时手动声明版本，则该依赖的版本会替换父项目默认的版本</li>
<li>在项目pom文件中的<code>properties</code>属性中加入版本管理</li>
</ul>
<p>第三方的jar包</p>
<ul>
<li>boot父项目没有进行版本管理的要自定义版本号</li>
</ul>
<br>



<h4 id="2-2-自动配置机制"><a href="#2-2-自动配置机制" class="headerlink" title="2.2 自动配置机制"></a>2.2 自动配置机制</h4><p><strong>初步理解</strong></p>
<ul>
<li>自动配置<code>Tomcat、SpringMVC</code>等<ul>
<li>导入什么场景，容器中就会自动配置好这个场景的核心组件</li>
<li>容器中有了什么组件就会有什么功能</li>
</ul>
</li>
<li>默认的包扫描规则<ul>
<li><code>@SprongBootApplication</code>标注的类就是主程序类</li>
<li><strong>SpringBoot只会扫描主程序所在的包及其下面的包</strong></li>
<li>自定义扫描路径<ul>
<li><code>@SpringBootApplication(scanBasePackages = &quot;com.zheng&quot;)</code>,在启动类的@SpringBootApplication注解上添加属性scanBasePackages,属性的值是需要扫描的包</li>
<li><code>@ComponentScan(&quot;com.zheng&quot;)</code>，在启动类中添加注解@ComponentScan，属性值是需要扫描的包</li>
</ul>
</li>
</ul>
</li>
<li>配置默认值<ul>
<li>配置文件的所有配置项是和某个<strong>类的对象</strong>值进行一一绑定的</li>
<li>绑定了配置文件中每一项值的类：<strong>属性类</strong></li>
<li>例如： <code>ServerProperties</code>绑定了所有Tomcat服务器有关的配置、<code>MultipartProperties</code>绑定了所有文件上传相关的配置</li>
</ul>
</li>
<li>按需加载自动配置<ul>
<li>导入场景<code>spring-boot-starter-web</code></li>
<li>场景启动器除了会导入相关的依赖，还会导入一个<code>spring-boot-starter</code>，它是所有<code>starter</code>的<code>starter</code>，是基础的<code>starter</code></li>
<li><code>spring-boot-starter</code>导入了一个包<code>spring-boot-autoconfigure</code>，这个包里面包含各种场景的<code>AutoConfiguration</code>自动配置类</li>
<li>虽然全场景的自动配置都在<code>spring-boot-autoconfigure</code>这个包，但是不是全部都开启的，只有需要的才会开启</li>
</ul>
</li>
</ul>
<p><strong>总结：</strong>导入场景启动器、触发<code>Spring-boot-autoconfigure</code>这个包的自动配置生效、容器中就会具有相关场景的功能</p>
<br>



<hr>
<h3 id="3-核心技能"><a href="#3-核心技能" class="headerlink" title="3. 核心技能"></a>3. 核心技能</h3><h4 id="3-1-常见注解"><a href="#3-1-常见注解" class="headerlink" title="3.1 常见注解"></a>3.1 常见注解</h4><p><strong>组件注解</strong></p>
<p>@Configuration、@SpringBootConfiguration</p>
<p>@Bean、@Scope</p>
<p>@Controller、@Service、@Repository、@Component</p>
<p>@Import</p>
<p>@ComponentScan</p>
<p>配置类：</p>
<ol>
<li>@Configuration编写一个配置类</li>
<li>在配置类中，自定义方法给容器中注册组件。配合@Bean</li>
<li>使用@Import导入第三方的组件</li>
</ol>
<br>



<p><strong>条件注解</strong></p>
<p>如果注解指定的条件成立，则触发指定行为</p>
<ul>
<li>@ConditionalOnClass：如果类路径中存在这个类，则触发指定行为</li>
<li>@ConditionalOnMissingClass：如果类路径中不存在这个类，则触发指定行为</li>
<li>@ConditionalOnBean：如果容器中存在这个Bean（组件），则触发指定行为</li>
<li>@ConditionalOnMissingBean：如果容器中不存在这个Bean（组件），则触发指定行为</li>
<li>@ConditionalOnBean(value&#x3D;组件类型，name&#x3D;组件名字)：判断容器中是否有这个类型的组件，并且名字是指定的值</li>
</ul>
<br>



<p><strong>属性绑定</strong></p>
<p><code>@ConfigurationProperties</code></p>
<p>将容器中任意组件（Bean）的属性值和配置文件的配置项的值进行绑定</p>
<ul>
<li>给容器中注册组件（@Component、@Bean）</li>
<li>使用@ConfigurationProperties声明组件和配置文件的哪些配置进行绑定</li>
</ul>
<p><code>@EnableConfigurationProperties</code></p>
<ul>
<li>Springboot默认是不会扫描第三方包，如果导入了第三方的包，即时组件上标注了@ConfigurationProperties注解也没用，因为组件扫描不进来，这时候就需要@EnableConfigurationProperties注解来进行属性的绑定并把组件注册进容器</li>
</ul>
<br>



<h4 id="3-2-YAML配置文件"><a href="#3-2-YAML配置文件" class="headerlink" title="3.2 YAML配置文件"></a>3.2 YAML配置文件</h4><p><strong>基本语法</strong></p>
<ul>
<li>大小写敏感</li>
<li>使用缩进表示层级关系，k: v，使用空格分割k，v</li>
<li>缩进的空格数随意，主要相同层级的元素左对齐即可</li>
<li><code>#</code>表示注解，从这个字符一直到行尾，都会被解析器忽略</li>
</ul>
<br>



<p><strong>示例</strong></p>
<p>第一4个类</p>
<p><img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231117155159086.png"></p>
<p>只有Person类需要注入到组件中去</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span> <span class="comment">//和配置文件person前缀的所有配置进行绑定</span></span><br><span class="line"><span class="meta">@Data</span> <span class="comment">//自动生成JavaBean属性的getter/setter</span></span><br><span class="line"><span class="comment">//@NoArgsConstructor //自动生成无参构造器</span></span><br><span class="line"><span class="comment">//@AllArgsConstructor //自动生成全参构造器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthDay;</span><br><span class="line">    <span class="keyword">private</span> Boolean like;</span><br><span class="line">    <span class="keyword">private</span> Child child; <span class="comment">//嵌套对象</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Dog&gt; dogs; <span class="comment">//数组（里面是对象）</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Cat&gt; cats; <span class="comment">//表示Map</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Child</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthDay;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; text; <span class="comment">//数组</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<p>获取person并输出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">ioc</span> <span class="operator">=</span> SpringApplication.run(MainApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> ioc.getBean(Person.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;person: &quot;</span> + person);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<p>properties表示法</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person.name</span>=<span class="string">张三</span></span><br><span class="line"><span class="attr">person.age</span>=<span class="string">18</span></span><br><span class="line"><span class="attr">person.birthDay</span>=<span class="string">2010/10/12 12:12:12</span></span><br><span class="line"><span class="attr">person.like</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">person.child.name</span>=<span class="string">李四</span></span><br><span class="line"><span class="attr">person.child.age</span>=<span class="string">12</span></span><br><span class="line"><span class="attr">person.child.birthDay</span>=<span class="string">2018/10/12</span></span><br><span class="line"><span class="attr">person.child.text[0]</span>=<span class="string">abc</span></span><br><span class="line"><span class="attr">person.child.text[1]</span>=<span class="string">def</span></span><br><span class="line"><span class="attr">person.dogs[0].name</span>=<span class="string">小黑</span></span><br><span class="line"><span class="attr">person.dogs[0].age</span>=<span class="string">3</span></span><br><span class="line"><span class="attr">person.dogs[1].name</span>=<span class="string">小白</span></span><br><span class="line"><span class="attr">person.dogs[1].age</span>=<span class="string">2</span></span><br><span class="line"><span class="attr">person.cats.c1.name</span>=<span class="string">小蓝</span></span><br><span class="line"><span class="attr">person.cats.c1.age</span>=<span class="string">3</span></span><br><span class="line"><span class="attr">person.cats.c2.name</span>=<span class="string">小灰</span></span><br><span class="line"><span class="attr">person.cats.c2.age</span>=<span class="string">2</span></span><br></pre></td></tr></table></figure>

<br>



<p>输出结果</p>
<p><img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231117155514578.png" alt="image-20231117155514578"></p>
<br>



<p>yaml表示法</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">张三</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">birthDay:</span> <span class="number">2010</span><span class="string">/10/10</span> <span class="number">12</span><span class="string">:12:12</span></span><br><span class="line">  <span class="attr">like:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">child:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">李四</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">birthDay:</span> <span class="number">2018</span><span class="string">/10/10</span></span><br><span class="line">    <span class="attr">text:</span> [<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;def&quot;</span>]</span><br><span class="line">  <span class="attr">dogs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">小黑</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">小白</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">cats:</span></span><br><span class="line">    <span class="attr">c1:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">小蓝</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">    <span class="attr">c2:</span> &#123;<span class="attr">name:</span> <span class="string">小绿</span>,<span class="attr">age:</span> <span class="number">2</span>&#125; <span class="comment">#对象也可用&#123;&#125;表示</span></span><br></pre></td></tr></table></figure>

<br>



<p>输出结果，要把application.properties中的数据注释掉在运行，否则会输出application.properties中的数据，因为properties的优先级大于yaml</p>
<p><img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231117155731222.png"></p>
<br>



<p><strong>细节</strong></p>
<ul>
<li>birthDay推荐写为brith-day</li>
<li>文本：<ul>
<li>单引号不会转义[会把\n作为普通字符输出]</li>
<li>双引号会转义[\n会显示为换行符]</li>
</ul>
</li>
<li>多文档合并<ul>
<li>使用<code>---</code>可以把多个yaml文档合并在一个文档中，每个文档区依然认为内容独立</li>
</ul>
</li>
</ul>
<br>



<p><strong>lombok</strong></p>
<p>使用lombok创建可以简化JavaBean的开发。能自动生成setter、getter、构造器、toString方法、自动生成Builder模式等</p>
<p><code>@Data</code>默认只会生成无参构造器，如果需要有参构造器需要用注解自己添加</p>
<p>&#96;&#96;@NoArgsConstructor&#96; 自动生成无参构造器</p>
<p><code>@AllArgsConstructor</code> 自动生成全参构造器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;compile&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231117160611543.png" style="zoom:67%;">

<br>





<h4 id="3-3-日志配置"><a href="#3-3-日志配置" class="headerlink" title="3.3 日志配置"></a>3.3 日志配置</h4><p>项目开发不要编写<code>System.out.println()</code>，应该使用<code>日志</code>记录信息</p>
<br>



<p><strong>简介</strong></p>
<ul>
<li>Spirng使用<code>commons-logging</code>作为内部日志，但底层日志实现是开放的，可以对接其它日志框架，从Spring5开始把<code>commons-logging</code>集成在spring中，不需要再引入</li>
<li>支持<code>jul</code>，<code>log4j2</code>，<code>logback</code>。SpringBoot提供了默认的控制台输出配置，也可以配置输出为文件</li>
<li><code>logback</code>是默认使用的</li>
</ul>
<br>



<p><strong>SpringBoot是如何把日志默认配置好的</strong></p>
<ol>
<li>每个<code>starter</code>场景都会导入一个核心场景<code>spring-boot-starter</code></li>
<li>核心场景引用了日志的所有功能<code>spring-boot-starter-logging</code></li>
<li>默认使用了<code>logback + slf4j</code>作为默认底层日志</li>
<li>日志是系统一启动就要用的</li>
<li>日志是利用监听器机制配置好的，<code>ApplicationListener</code></li>
<li>日志所有的配置都是可以通过修改配置文件实现的。以<code>logging</code>开始所有的配置</li>
</ol>
<br>





<p><strong>日志格式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2023</span>-<span class="number">11</span>-17T15:<span class="number">57</span>:<span class="number">49.570</span>+08:<span class="number">00</span>  INFO <span class="number">17668</span> --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line"><span class="number">2023</span>-<span class="number">11</span>-17T15:<span class="number">57</span>:<span class="number">49.570</span>+08:<span class="number">00</span>  INFO <span class="number">17668</span> --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/<span class="number">10.1</span><span class="number">.7</span>]</span><br></pre></td></tr></table></figure>

<p>默认输出格式：</p>
<ul>
<li>时间和容器：毫秒级精准	2023-11-17T15:57:49.570+08:00</li>
<li>日志级别：<code>ERROR</code>,<code>WARN</code>,<code>INFO</code>,<code>DEBUG</code>,<code>TRACE</code>	INFO</li>
<li>进程ID	17668</li>
<li>消息分隔符	—</li>
<li>线程名：使用[]包含	[           main]</li>
<li>Logger名：通常是产生日志的类名	o.apache.catalina.core.StandardService</li>
<li>消息：日志记录的内容	Starting service [Tomcat]</li>
</ul>
<p>注意：logback没有FATAL级别，对应的是ERROR</p>
<br>



<p>日志的格式是可以修改的，通过在配置文件中自定义日志格式</p>
<p><code>logging.pattern.console </code> 修改控制台日志的格式</p>
<p><code>logging.pattern.file</code> 修改日志文件中日志的格式</p>
<p><code>logging.pattern.dateformat</code> 修改日期格式</p>
<img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231117205638097.png" alt="image-20231117205638097" style="zoom:80%;">

<br>



<p><strong>记录日志</strong></p>
<p>在类上加入注解<code>@Slf4j</code>后，可以通过<code>log.info()</code>在控制台打印日志</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;hello,Java&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2023</span>-<span class="number">11</span>-17T21:09:<span class="number">05.983</span>+08:<span class="number">00</span>  INFO <span class="number">16376</span> --- [nio-<span class="number">8080</span>-exec-<span class="number">1</span>] c.z.logging.controller.HelloController   : hello,Java</span><br></pre></td></tr></table></figure>

<br>



<p><strong>日志级别</strong></p>
<ul>
<li><p>由低到高：<code>ALL,TRACE,DEBUG,INFO,WARN,ERROR,FATAL,OFF</code></p>
<ul>
<li>只会打印指定级别及以上级别的日志</li>
<li>ALL：打印所有日志</li>
<li>TRACE：追踪框架详细流程日志，一般不使用</li>
<li>DEBUG：开发调试细节日志</li>
<li>INFO：关键、感兴趣的信息日志，一般通过手动INFO在控制台输出自己需要的提示信息</li>
<li>WARN：警告但不是错误的信息日志，比如版本过低警告</li>
<li>ERROR：业务错误日志，比如出现各种异常</li>
<li>FATAL：致命错误日志，比如JVM系统崩溃</li>
<li>OFF：关闭所有日志</li>
</ul>
</li>
<li><p>所有类的默认日志级别都使用root指定的级别作为默认级别</p>
</li>
<li><p>SpringBoot的日志默认级别是<code>INFO</code></p>
</li>
<li><p>可以修改所有类的日志级别和指定一个类的日志级别，通过配置<code>application.properties/yaml</code>文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">logging.level.root=info</span><br><span class="line">logging.level.com.zheng.logging.controller.HelloController=debug</span><br></pre></td></tr></table></figure>

<ul>
<li>logging.level.root&#x3D;info 设置所有类的日志级别为INFO</li>
<li>logging.level.com.zheng.logging.controller.HelloController&#x3D;debug 设置com.zheng.logging.controller.HelloController这个类的日志级别为DEBUG</li>
</ul>
</li>
</ul>
<br>



<p><strong>日志分组</strong></p>
<p>将相关的logger分组在一起，统一配置。SpringBoot也支持。比如把Tomcat相关的日志统一设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">logging.group.tomcat=org.apache.catalina,org.apache.coyote,org.apache.tomcat</span><br><span class="line">logging.level.tomcat=trace</span><br></pre></td></tr></table></figure>

<br>



<p>SpringBoot预定义了两个分组<code>web</code>和<code>sql</code></p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th>Loggers</th>
</tr>
</thead>
<tbody><tr>
<td align="center">web</td>
<td>org.springframework.core.codec, org.springframework.http, org.springframework.web, org.springframework.boot.actuate.endpoint.web, org.springframework.boot.web.servlet.ServletContextInitializerBeans</td>
</tr>
<tr>
<td align="center">sql</td>
<td>org.springframework.jdbc.core, org.hibernate.SQL, org.jooq.tools.LoggerListener</td>
</tr>
</tbody></table>
<br>



<p><strong>文件输出</strong></p>
<p>SpringBoot默认只把日志写在控制台，如果想额外记录日志到文件，可以在<code>application,properties</code>中添加<code>logging.file.name</code>或者<code>logging.file.path</code>配置项</p>
<table>
<thead>
<tr>
<th>logging.file.name</th>
<th>logging.file.path</th>
<th>示例</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>未指定</td>
<td>未指定</td>
<td></td>
<td>仅控制台输出</td>
</tr>
<tr>
<td><strong>指定</strong></td>
<td>未指定</td>
<td>my.log</td>
<td>写入指定文件。可以加路径</td>
</tr>
<tr>
<td>未指定</td>
<td><strong>指定</strong></td>
<td>&#x2F;var&#x2F;log</td>
<td>写入指定目录，文件名为spring.log</td>
</tr>
<tr>
<td><strong>指定</strong></td>
<td><strong>指定</strong></td>
<td></td>
<td>以logging.file.name为准</td>
</tr>
</tbody></table>
<p>当两个配置项都存在时以logging.file.name为准</p>
<br>



<p><strong>文件归档与滚动切割</strong></p>
<p><strong>归档：</strong>每天的日志单独存放在一个文件中</p>
<p><strong>切割：</strong>指定每个文件的存储上限，超过上限时切割成另一个文件</p>
<ul>
<li><p>每天的日志应该单独分割出来存储。如果使用<code>logback</code>（SpringBoot默认整合），可以通过<code>application.properties/yaml</code>文件指定日志滚动规则</p>
</li>
<li><p>如果是其他日志系统，需要自行配置,添加log4j2.xml或log4j2-spring.xml</p>
</li>
<li><p>支持的滚动规则如下</p>
<table>
<thead>
<tr>
<th>配置项</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>logging.logback.rollingpolicy.file-name-pattern</td>
<td>日志存档的文件名格式（默认值：${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz）</td>
</tr>
<tr>
<td>logging.logback.rollingpolicy.clean-history-on-start</td>
<td>应用启动时是否清除以前存档（默认值：false）</td>
</tr>
<tr>
<td>logging.logback.rollingpolicy.max-file-size</td>
<td>存档前，每个日志文件的最大大小（默认值：10MB）</td>
</tr>
<tr>
<td>logging.logback.rollingpolicy.total-size-cap</td>
<td>日志文件被删除之前，可以容纳的最大大小（默认值：0B）。设置1GB则磁盘存储超过 1GB 日志后就会删除旧日志文件</td>
</tr>
<tr>
<td>logging.logback.rollingpolicy.max-history</td>
<td>日志文件保存的最大天数(默认值：7).</td>
</tr>
</tbody></table>
</li>
</ul>
<br>



<p><strong>自定义日志系统</strong></p>
<table>
<thead>
<tr>
<th>日志系统</th>
<th>自定义</th>
</tr>
</thead>
<tbody><tr>
<td>Logback</td>
<td>logback-spring.xml, logback-spring.groovy, logback.xml, or logback.groovy</td>
</tr>
<tr>
<td>Log4j2</td>
<td>log4j2-spring.xml or log4j2.xml</td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td>logging.properties</td>
</tr>
</tbody></table>
<p>建议在日志配置中使用<code>-spring</code>变量，例如配置文件名用<code>logback-spring.xml</code>而不是<code>logback.xml</code>。如果不添加<code>-spring</code>，spring无法完全控制日志初始化</p>
<br>



<hr>
<h3 id="4-Web开发"><a href="#4-Web开发" class="headerlink" title="4. Web开发"></a>4. Web开发</h3><h4 id="4-1-Web场景"><a href="#4-1-Web场景" class="headerlink" title="4.1 Web场景"></a>4.1 Web场景</h4><p>整合文web场景</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>引入了<code>autoconfigure</code>功能<br><code>@EnableAutoConfiguration</code>注解使用<code>@Import(AutoConfigurationImportSelector.calss)</code>批量导入组件</p>
<p>绑定了配置文件的一堆配置项</p>
<ul>
<li>SpringMVC的所有配置<code>spring.mvc</code></li>
<li>Web场景通用配置<code>spring.web</code></li>
<li>文件上传配置<code>spring.servlet.multipart</code></li>
<li>服务器的配置<code>server</code></li>
</ul>
<br>



<hr>
<h3 id="5-数据访问"><a href="#5-数据访问" class="headerlink" title="5. 数据访问"></a>5. 数据访问</h3><h4 id="5-1-SpringBoot整合Spring、MyBatis、SpringMVC"><a href="#5-1-SpringBoot整合Spring、MyBatis、SpringMVC" class="headerlink" title="5.1 SpringBoot整合Spring、MyBatis、SpringMVC"></a>5.1 SpringBoot整合Spring、MyBatis、SpringMVC</h4><p>详情见：<a href="lzhengjy.gitee.io/2023/11/09/SpringBoot%E6%95%B4%E5%90%88MyBatis%E5%92%8CSpringMVC/">SpringBoot整合SSM</a></p>
<p>所有的<code>Mybatis配置</code>写在<code>application.properties</code>中</p>
<p>所有的sql写在对应xml文件中或者通过注解写在对应的mapper接口上</p>
<br>



<h4 id="5-2-自动配置分析"><a href="#5-2-自动配置分析" class="headerlink" title="5.2 自动配置分析"></a>5.2 自动配置分析</h4><p><strong>jdbc场景的自动配置</strong></p>
<ul>
<li><code>mybatis-spring-boot-starter</code>导入 <code>spring-boot-starter-jdbc</code>，jdbc是操作数据库的场景</li>
<li>jdbc场景的几个自动装配<ul>
<li>org.springframework.boot.autoconfigure.jdbc.<strong>DataSourceAutoConfiguration</strong><ul>
<li>数据源的自动装配</li>
<li>所有和数据源有关的配置绑定在<code>DataSourceProperties</code>中</li>
<li>默认使用<code>HikariDataSource</code></li>
</ul>
</li>
<li>org.springframework.boot.autoconfigure.jdbc.<strong>JdbcTemplateAutoConfiguration</strong><ul>
<li>给容器中放了<code>JdbcTemplate</code>操作数据库</li>
</ul>
</li>
<li>org.springframework.boot.autoconfigure.jdbc.<strong>DataSourceTransactionManagerAutoConfiguration</strong><ul>
<li>支持事务管理</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>



<p><strong><code>MyBatisAutoConfiguration</code>配置了MyBatis的整合流程</strong></p>
<ul>
<li><code>mybatis-spring-boot-starter</code>导入了<code>mybatis-spring-boot-autoconfigure</code></li>
<li>默认加载两个自动配置类<ul>
<li>org.mybatis.spring.boot.autoconfigure.MybatisLanguageDriverAutoConfiguration</li>
<li>org.mybatis.spring.boot.autoconfigure.<strong>MybatisAutoConfiguration</strong><ul>
<li>必须在数据源配置好后才会配置</li>
<li>给容器中<code>SqlSessionFactory</code>组件创建和数据库的一次会话</li>
<li>给容器中<code>SqlSessionTemplate</code>操作数据库</li>
</ul>
</li>
<li>MyBatis的所有配置都绑定在<code>MybatisProperties</code>中</li>
</ul>
</li>
</ul>
<br>



<hr>
<h3 id="6-基础特性"><a href="#6-基础特性" class="headerlink" title="6. 基础特性"></a>6. 基础特性</h3><h4 id="6-1-SpringApplication"><a href="#6-1-SpringApplication" class="headerlink" title="6.1. SpringApplication"></a>6.1. SpringApplication</h4><p><strong>自定义banner</strong></p>
<ul>
<li>类路径添加banner.txt或者设置spring.banner.location就可以定制banner了</li>
<li>spring.banner.location的默认值是classpath:banner.txt(类路径添加banner.txt)</li>
<li>自定义banner推荐网站：<a target="_blank" rel="noopener" href="https://www.bootschool.net/ascii">Spring Boot自定义启动Banner在线生成工具</a></li>
<li>关闭banner,在application.properties中添加配置<code>spring.main.banner-mode=off</code></li>
</ul>
<br>



<p><strong>测试</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> ________  ___  ___  _______   ________   ________</span><br><span class="line">|\_____  \|\  \|\  \|\  ___ \ |\   ___  \|\   ____\</span><br><span class="line"> \|___/  /\ \  \\\  \ \   __/|\ \  \\ \  \ \  \___|</span><br><span class="line">     /  / /\ \   __  \ \  \_|/_\ \  \\ \  \ \  \  ___</span><br><span class="line">    /  /_/__\ \  \ \  \ \  \_|\ \ \  \\ \  \ \  \|\  \</span><br><span class="line">   |\________\ \__\ \__\ \_______\ \__\\ \__\ \_______\</span><br><span class="line">    \|_______|\|__|\|__|\|_______|\|__| \|__|\|_______|</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121145636418.png" style="zoom:67%;">

<br>



<p><strong>自定义 SpringApplication</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Boot306FeaturesApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        SpringApplication.run(Boot306FeaturesApplication.class, args);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义SpringApplication的底层设置</span></span><br><span class="line">        <span class="type">SpringApplication</span> <span class="variable">application</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplication</span>(Boot306FeaturesApplication.class);</span><br><span class="line">        <span class="comment">// 调整SpringApplication的参数</span></span><br><span class="line"><span class="comment">//        application.setDefaultProperties();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 把banner关闭,优先级比配置文件低</span></span><br><span class="line">        application.setBannerMode(Banner.Mode.OFF);</span><br><span class="line">        <span class="comment">// 运行SpringApplication</span></span><br><span class="line">        application.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<p><strong>通过FluentBuilderAPI来自定义</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里的environment和listeners的值不能为空</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SpringApplicationBuilder</span>()</span><br><span class="line">        .main(Boot306FeaturesApplication.class)</span><br><span class="line">        .sources(Boot306FeaturesApplication.class)</span><br><span class="line">        .bannerMode(Banner.Mode.OFF)</span><br><span class="line"><span class="comment">//        .environment(null)</span></span><br><span class="line"><span class="comment">//        .listeners(null)</span></span><br><span class="line">        .run(args);</span><br></pre></td></tr></table></figure>

<br>





<h4 id="6-2-Profiles"><a href="#6-2-Profiles" class="headerlink" title="6.2 Profiles"></a>6.2 Profiles</h4><p>Profiles是一种配置集合，开发人员可以根据不同的开发环境、需求或者配置条件来定制构建过程</p>
<br>

<p><strong>标识环境</strong></p>
<p>任何<code>@Componet</code>,<code>@Configuration</code>或<code>@ConfigurationProperties</code>可以使用<code>@Profile</code>标记，来指定何时被加载。容器中的组件都可以被@Profiles标记</p>
<br>



<p><strong>激活环境</strong></p>
<p>通过配置文件来配置激活指定环境</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">production</span></span><br></pre></td></tr></table></figure>

<p>也可用在启动项目时使用命令行激活:<code>--spirng.profiles.active=dev</code></p>
<br>



<p><strong>环境包含</strong></p>
<ul>
<li><p>激活指定的一个或多个环境：<code>spring.profiles.active=production</code></p>
</li>
<li><p>指定默认环境：<code>spring.profiles.default=default</code></p>
</li>
<li><p>包含指定环境，无论激活的是哪个环境，指定环境都会被激活生效：<code>spring.profiles.include=dev</code></p>
<ul>
<li><p>例如</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.profiles.include[0]</span>=<span class="string">common</span></span><br><span class="line"><span class="attr">spring.profiles.include[1]</span>=<span class="string">local</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><code>=</code>后面的都是自定义的环境名</p>
</li>
</ul>
<br>



<p><strong>Profile分组</strong></p>
<p>创建prod组，指定包含db和mq配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.profiles.group.prod[0]</span>=<span class="string">db</span></span><br><span class="line"><span class="attr">spring.profiles.group.prod[1]</span>=<span class="string">mq</span></span><br></pre></td></tr></table></figure>

<p>使用<code>--spring.profiles.active=prod</code>，就会激活<code>prod,db,mp</code>配置文件</p>
<br>



<p><strong>Profile配置文件</strong></p>
<ul>
<li><code>application.properties</code>：主配置文件，在任何环境下都会生效</li>
<li><code>application-&#123;profile&#125;.properties/yaml</code>：可以作为指定环境的配置文件，例如<ul>
<li><code>application-dev.properties</code></li>
<li><code>application-test.yaml</code></li>
</ul>
</li>
<li>激活这个环境，配置就会生效</li>
<li>配置的优先级：自定义环境的配置文件优先级大于主配置文件优先级，<code>profile优先级</code>&gt;<code>application</code></li>
</ul>
<br>







<h4 id="6-3-外部化配置"><a href="#6-3-外部化配置" class="headerlink" title="6.3 外部化配置"></a>6.3 外部化配置</h4><p>线上应用如何快速修改配置，并应用最新配置？</p>
<ul>
<li>SpringBoot使用<strong>配置优先级 + 外部配置</strong>简化配置更新、简化运维</li>
<li>只需要在项目的jar包所在的文件夹下面在放一个<code>application.properties</code>最新配置文件，重启项目就能更新最新配置</li>
</ul>
<br>



<p><strong>配置优先级</strong></p>
<ol>
<li><strong>默认属性</strong>（通过<code>SpringApplication.setDefaultProperties</code>指定的）</li>
<li>@PropertySource指定加载的配置（需要写在@Configuration类上才可生效）</li>
<li><strong>配置文件（pplication.properties&#x2F;yml等）</strong></li>
<li>RandomValuePropertySource支持的random.*配置（如：@Value(“${random.int}”)）</li>
<li>OS 环境变量</li>
<li>Java 系统属性（System.getProperties()）</li>
<li>JNDI 属性（来自java:comp&#x2F;env）</li>
<li>ServletContext 初始化参数</li>
<li>ServletConfig 初始化参数</li>
<li>SPRING_APPLICATION_JSON属性（内置在环境变量或系统属性中的 JSON）</li>
<li><strong>命令行参数</strong></li>
<li>测试属性。(@SpringBootTest进行测试时指定的属性)</li>
<li>测试类@TestPropertySource注解</li>
<li>Devtools 设置的全局属性。($HOME&#x2F;.config&#x2F;spring-boot)</li>
</ol>
<br>



<p><strong>配置文件的优先级如下（后面的覆盖前面的）</strong></p>
<ol>
<li>jar包内的<code>application.properties.yml</code></li>
<li>jar包内的<code>application-&#123;profile&#125;.properties/yml</code></li>
<li>jar包外的<code>application.properties/yml</code></li>
<li>jar包外的<code>application-&#123;profile&#125;.properties/yml</code></li>
<li>如果<code>properties</code>和<code>yml</code>同时存在，<code>properties</code>优先</li>
</ol>
<br>





<h4 id="6-4-单元测试"><a href="#6-4-单元测试" class="headerlink" title="6.4 单元测试"></a>6.4 单元测试</h4><p>SpringBoot提供一系列测试工具及注解方便我们进行测试</p>
<p>我们只需要导入<code>spring-boot-starter-test</code>即可整合测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<br>



<p>spring-boot-starter-test默认提供了下面的库供我们测试使用</p>
<ul>
<li>JUnit 5</li>
<li>Spring Test</li>
<li>AssertJ</li>
<li>Hamcrest</li>
<li>Mockito</li>
<li>JSONassert</li>
<li>JsonPath</li>
</ul>
<br>



<p>如果要测试组件，在测试类中通过<code>@Autowired</code>导入需要测试的组件即可</p>
<br>



<p><strong>注解</strong></p>
<p>JUnit 5 的注解相对于 JUnit 4 有所变化</p>
<p><a target="_blank" rel="noopener" href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">JUnit官网</a></p>
<ul>
<li>**@Test :**表示方法是测试方法。但是与JUnit4的@Test不同，他的职责非常单一不能声明任何属性，拓展的测试将会由Jupiter提供额外测试</li>
<li>**@ParameterizedTest :**表示方法是参数化测试，下方会有详细介绍</li>
<li>**@RepeatedTest :**表示方法可重复执行，下方会有详细介绍</li>
<li>**@DisplayName :**为测试类或者测试方法设置展示名称</li>
<li>**@BeforeEach :**表示在每个单元测试之前执行</li>
<li>**@AfterEach :**表示在每个单元测试之后执行</li>
<li>**@BeforeAll :**表示在所有单元测试之前执行</li>
<li>**@AfterAll :**表示在所有单元测试之后执行</li>
<li>**@Tag :**表示单元测试类别，类似于JUnit4中的@Categories</li>
<li>**@Disabled :**表示测试类或测试方法不执行，类似于JUnit4中的@Ignore</li>
<li>**@Timeout :**表示测试方法运行如果超过了指定时间将会返回错误</li>
<li>**@ExtendWith :**为测试类或测试方法提供扩展类引用</li>
</ul>
<br>



<p><strong>断言</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>assertEquals</td>
<td>判断两个对象或两个原始类型是否相等</td>
</tr>
<tr>
<td>assertNotEquals</td>
<td>判断两个对象或两个原始类型是否不相等</td>
</tr>
<tr>
<td>assertSame</td>
<td>判断两个对象引用是否指向同一个对象</td>
</tr>
<tr>
<td>assertNotSame</td>
<td>判断两个对象引用是否指向不同的对象</td>
</tr>
<tr>
<td>assertTrue</td>
<td>判断给定的布尔值是否为 true</td>
</tr>
<tr>
<td>assertFalse</td>
<td>判断给定的布尔值是否为 false</td>
</tr>
<tr>
<td>assertNull</td>
<td>判断给定的对象引用是否为 null</td>
</tr>
<tr>
<td>assertNotNull</td>
<td>判断给定的对象引用是否不为 null</td>
</tr>
<tr>
<td>assertArrayEquals</td>
<td>数组断言</td>
</tr>
<tr>
<td>assertAll</td>
<td>组合断言</td>
</tr>
<tr>
<td>assertThrows</td>
<td>异常断言</td>
</tr>
<tr>
<td>assertTimeout</td>
<td>超时断言</td>
</tr>
<tr>
<td>fail</td>
<td>快速失败</td>
</tr>
</tbody></table>
<br>



<p><strong>参数化测试</strong></p>
<p>参数化测试是JUnit5很重要的一个新特性，它使得用不同的参数多次运行测试成为了可能，也为我们的单元测试带来许多便利。</p>
<p>利用**@ValueSource**等注解，指定入参，我们将可以使用不同的参数进行多次单元测试，而不需要每新增一个参数就新增一个单元测试，省去了很多冗余代码。</p>
<ul>
<li>@ValueSource: 为参数化测试指定入参来源，支持八大基础类以及String类型,Class类型</li>
<li>@NullSource: 表示为参数化测试提供一个null的入参</li>
<li>@EnumSource: 表示为参数化测试提供一个枚举入参</li>
<li>@CsvFileSource：表示读取指定CSV文件内容作为参数化测试入参</li>
<li>@MethodSource：表示读取指定方法的返回值作为参数化测试入参(注意方法返回需要是一个流）</li>
</ul>
<br>

 




      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/11/16/SpringBoot3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="clywa1f4d001becvef9iq1j85" data-title="SpringBoot3学习笔记" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot3/" rel="tag">SpringBoot3</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-SpringBoot整合MyBatis和SpringMVC" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/11/09/SpringBoot%E6%95%B4%E5%90%88MyBatis%E5%92%8CSpringMVC/" class="article-date">
  <time class="dt-published" datetime="2023-11-08T16:37:57.000Z" itemprop="datePublished">2023-11-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6%E5%92%8C%E4%B8%AD%E9%97%B4%E4%BB%B6/">框架和中间件</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/11/09/SpringBoot%E6%95%B4%E5%90%88MyBatis%E5%92%8CSpringMVC/">SpringBoot整合MyBatis和SpringMVC</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>我们通过一个案例来演示SpringBoot整合MyBatis和SpringMVC<br>该案例通过前后端分离来完成，前端使用vue2加JavaScript实现</p>
<h3 id="前端部分"><a href="#前端部分" class="headerlink" title="前端部分"></a>前端部分</h3><h4 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- &lt;input type=&quot;button&quot; value=&quot;获取远程数据&quot; @click=&quot;sendReq()&quot;&gt; --&gt;</span><br><span class="line">        &lt;div class=&quot;title&quot;&gt;学生列表&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;thead&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;row bold&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;姓名&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;性别&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;年龄&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;tbody&quot;&gt;</span><br><span class="line">            &lt;div v-if=&quot;students.length &gt; 0&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;row&quot; v-for=&quot;stu in students&quot; :key=&quot;stu.id&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;stu.id &#125;&#125;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;stu.name &#125;&#125;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;stu.sex &#125;&#125;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;stu.age&#125;&#125;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../utils/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted: function()&#123;</span><br><span class="line">        this.sendReq()</span><br><span class="line">    &#125;,</span><br><span class="line">    data: function() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: []</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        async sendReq() &#123;</span><br><span class="line">            const resp = await axios.get(&quot;/api/students&quot;);</span><br><span class="line">            console.log(resp.data);</span><br><span class="line">            this.students = resp.data.data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    div &#123;</span><br><span class="line">        font-family: 华文行楷;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .title &#123;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        color: #333;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .row &#123;</span><br><span class="line">        background-color: #fff;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .col &#123;</span><br><span class="line">        border: 1px solid #f0f0f0;</span><br><span class="line">        width: 15%;</span><br><span class="line">        height: 35px;</span><br><span class="line">        text-align: center;</span><br><span class="line">        line-height: 35px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .bold .col &#123;</span><br><span class="line">        background-color: #f1f1f1;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>v-if：条件渲染指令，根据表达式的值来动态控制元素的显示或隐藏， 当表达式中的值为true时，其里面的内容才会展现出来</p>
</li>
<li><p>v-else：条件渲染指令，当v-if中表达式的值为false时，其里面的内容才会展现出来，v-else需要和v-if搭配使用，不能单独存在</p>
</li>
<li><p>v-for：列表渲染指令，类似于Java中的foreach</p>
<ul>
<li>key：key属性主要用在Vue的虚拟DOM算法，在新旧nodes对比时辨识VNodes。如果不使用key，Vue会使用一种最大限度减少动态元素并且尽可能的尝试就地修改&#x2F;复用相同类型元素的算法；而使用key时，它会基于key的变化重新排列元素顺序，并且会移除&#x2F;销毁key不存在的元素</li>
</ul>
</li>
<li><p>import axios from ‘..&#x2F;utils&#x2F;myaxios’ ：这里的myaxios是自定义的axios</p>
</li>
<li><p>mounted：生命周期钩子函数，或自动执行其中的内容</p>
<ul>
<li>在Vue实例被挂载到真实的DOM元素后被调用</li>
<li>仅触发一次</li>
<li>应用场景：执行异步操作、注册事件监听器、调用第三方库或插件、执行其它初始化操作</li>
</ul>
</li>
<li><p>const resp &#x3D; await axios.get(“&#x2F;api&#x2F;students”)：像后端发送get请求并获取数据</p>
</li>
<li><p>this.students &#x3D; resp.data.data：把后端返回的对象中的数据获取到</p>
<ul>
<li><p>resp.data.data：由于后端统一了返回格式，resp.data只能获取到Result对象，resp.data.data才能获取到Result中的data数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code; <span class="comment">//编码：1成功，0和其它数字为失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg; <span class="comment">//错误信息</span></span><br><span class="line">    <span class="keyword">private</span> T data; <span class="comment">//数据</span></span><br><span class="line">    ......</span><br></pre></td></tr></table></figure></li>
</ul>
<br></li>
</ul>
<h4 id="自定义axios-js"><a href="#自定义axios-js" class="headerlink" title="自定义axios.js"></a>自定义axios.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="comment">// baseURL: &#x27;http://localhost:8080&#x27;,</span></span><br><span class="line">    <span class="attr">withCredentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 比如在这里添加统一的 headers</span></span><br><span class="line">      config.<span class="property">headers</span> = &#123;</span><br><span class="line">          <span class="title class_">Authorization</span>: <span class="string">&#x27;aaa.bbb.ccc&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">400</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求参数不正确&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">400</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跳转至登录页面&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">401</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;资源未找到&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">404</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _axios;</span><br></pre></td></tr></table></figure>

<br>



<h4 id="自定义axios-js-1"><a href="#自定义axios-js-1" class="headerlink" title="自定义axios.js"></a>自定义axios.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="comment">// baseURL: &#x27;http://localhost:8080&#x27;,</span></span><br><span class="line">    <span class="attr">withCredentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 比如在这里添加统一的 headers</span></span><br><span class="line">      config.<span class="property">headers</span> = &#123;</span><br><span class="line">          <span class="title class_">Authorization</span>: <span class="string">&#x27;aaa.bbb.ccc&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">400</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求参数不正确&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">400</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跳转至登录页面&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">401</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;资源未找到&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">404</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _axios;</span><br></pre></td></tr></table></figure>

<br>



<h4 id="配置文件vue-config-js"><a href="#配置文件vue-config-js" class="headerlink" title="配置文件vue.config.js"></a>配置文件vue.config.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在这里配置的端口号和统一的URL前缀映射</p>
<br>



<hr>
<h3 id="后端部分"><a href="#后端部分" class="headerlink" title="后端部分"></a>后端部分</h3><h4 id="POM文件"><a href="#POM文件" class="headerlink" title="POM文件"></a>POM文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="数据库表"><a href="#数据库表" class="headerlink" title="数据库表"></a>数据库表</h4><p>创建一个简单的表即可，输入一些内容</p>
<p><img src="/2023/11/09/SpringBoot%E6%95%B4%E5%90%88MyBatis%E5%92%8CSpringMVC/20231109142648.png"></p>
<br>



<h4 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>lombok插件中的@Data注解可以帮我们生成set、get、构造方法、toString等方法</p>
</li>
<li><p>Java中的类的属性名要和数据库表中的对应，数据库表可以用下划线，Java在编译时会把它用驼峰命名法转换，例如Java中的teacherName对应数据库中的teacher_name</p>
</li>
<li><p>Java中的类属性要和数据库表中的字段对应，数据类型也要对应</p>
<table>
<thead>
<tr>
<th align="center">MySQL字段类型</th>
<th align="center">Java实体类属性</th>
</tr>
</thead>
<tbody><tr>
<td align="center">int、tinyint、smallint、mediumint</td>
<td align="center">int</td>
</tr>
<tr>
<td align="center">bigint</td>
<td align="center">long</td>
</tr>
<tr>
<td align="center">float</td>
<td align="center">float</td>
</tr>
<tr>
<td align="center">double</td>
<td align="center">double</td>
</tr>
<tr>
<td align="center">varchar、char、text</td>
<td align="center">String</td>
</tr>
<tr>
<td align="center">date</td>
<td align="center">java.sql.Date</td>
</tr>
<tr>
<td align="center">time、datetime</td>
<td align="center">java.sqlTimestamp</td>
</tr>
<tr>
<td align="center">bit</td>
<td align="center">boolean</td>
</tr>
</tbody></table>
</li>
</ul>
<br>



<h4 id="控制层"><a href="#控制层" class="headerlink" title="控制层"></a>控制层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/api/students&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;List&lt;Student&gt;&gt; <span class="title function_">getAllStudent</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Student&gt; students = studentService.getAll();</span><br><span class="line">        <span class="keyword">return</span> Result.success(students);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<h4 id="业务层"><a href="#业务层" class="headerlink" title="业务层"></a>业务层</h4><p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line">    List&lt;Student&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentMapper studentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Student&gt; students = studentMapper.getAll();</span><br><span class="line">        <span class="keyword">return</span> students;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这里的接口不是必须的，但是使用接口能够带来挺多方便<ul>
<li>在尚未实现具体Service逻辑的情况下编写上层代码，如Controller对Service的调用</li>
<li>Spring默认是基于动态代理实现AOP的，动态代理需要接口</li>
<li>可以对Service进行多实现</li>
</ul>
</li>
<li>由于该案例只是简单的实现一下SpringBoot整合MyBatis和SpringMVC，并未在业务层做一些逻辑处理，只是简单获取数据并返回</li>
</ul>
<br>



<h4 id="数据层"><a href="#数据层" class="headerlink" title="数据层"></a>数据层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentMapper</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from student&quot;)</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Mapper和@Repository都是在持久层的接口上添加注解。</li>
<li>@Mapper是属于mybatis的注解。在程序中，mybatis需要找到对应的mapper，在编译时候动态生成代理类，实现数据库查询功能</li>
<li>但是如果只是单独的使用@Mapper注解的话，在idea中进行自动装配的时候，会出现警告，提示找不到这个bean。但是这个不影响程序运行，可以直接忽略也可以添加@Repository注解。这样spring会扫描@Repository并识别这个bean，就不会出现这个警告。</li>
</ul>
<br>



<h4 id="统一返回结果类"><a href="#统一返回结果类" class="headerlink" title="统一返回结果类"></a>统一返回结果类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer code; <span class="comment">//编码：1成功，0和其它数字为失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg; <span class="comment">//错误信息</span></span><br><span class="line">    <span class="keyword">private</span> T data; <span class="comment">//数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        Result&lt;T&gt; result = <span class="keyword">new</span> <span class="title class_">Result</span>&lt;T&gt;();</span><br><span class="line">        result.code = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T object)</span> &#123;</span><br><span class="line">        Result&lt;T&gt; result = <span class="keyword">new</span> <span class="title class_">Result</span>&lt;T&gt;();</span><br><span class="line">        result.data = object;</span><br><span class="line">        result.code = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">        result.msg = msg;</span><br><span class="line">        result.code = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Serializable接口：一个对象序列化的接口，一个类只有实现了Serializable接口，它的对象才能被序列化<ul>
<li>序列化：序列化是将对象状态转换为可保持或传输的格式的过程。与序列化相对的是反序列化，它将流转换为对象。这两个过程结合起来，可以轻松地存储和传输数据</li>
<li>把对象转换为字节序列的过程称为对象的序列化、把字节序列恢复为对象的过程称为对象的反序列化</li>
</ul>
</li>
<li>这里用的是泛型类，即在声明类时使用泛型</li>
</ul>
<br>



<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>application.yml</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/vue?serverTimezone=GMT%2B8&amp;useSSL=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">&quot;020427&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>这里配置了数据源</li>
</ul>
<br>

<p>application.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#端口号</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="comment">#druid数据库连接池</span></span><br><span class="line"><span class="comment">#type=com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="comment">#清除缓存</span></span><br><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="comment">#配置mapper</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<ul>
<li>这里配置了端口号</li>
<li>mybatis.mapper-locations：用于将配置路径下的*.xml文件加载到mybatis中，这个案例中mapper文件下没有写xml文件，采用的是注解的方法，所以这里可以不用配置</li>
<li>spring.thymeleaf.cache：Spring Thymeleaf模板引擎的配置属性，用于指定是否启用模板缓存<ul>
<li>true：Thymeleaf会将解析过的模板缓存起来，以提高性能</li>
<li>false：每次请求都会重新解析模板</li>
</ul>
</li>
</ul>
<br>



<h3 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h3><p>启动前端项目<br>在vue项目下用命令行运行启动指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<img src="/2023/11/09/SpringBoot%E6%95%B4%E5%90%88MyBatis%E5%92%8CSpringMVC/20231109154830.png" style="zoom: 67%;">

<br>



<p>后端正常在启动类启动就行了</p>
<p>最终正常前端从后端获取到了数据并展示在页面中</p>
<p><img src="/2023/11/09/SpringBoot%E6%95%B4%E5%90%88MyBatis%E5%92%8CSpringMVC/20231109155246.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/11/09/SpringBoot%E6%95%B4%E5%90%88MyBatis%E5%92%8CSpringMVC/" data-id="clywa1f4g001lecvecn17ggw0" data-title="SpringBoot整合MyBatis和SpringMVC" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue2基础知识" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="article-date">
  <time class="dt-published" datetime="2023-11-04T07:15:15.000Z" itemprop="datePublished">2023-11-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">Vue2基础知识</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一-Vue2基础"><a href="#一-Vue2基础" class="headerlink" title="一. Vue2基础"></a>一. Vue2基础</h2><h3 id="1-环境准备"><a href="#1-环境准备" class="headerlink" title="1. 环境准备"></a>1. 环境准备</h3><p><strong>安装脚手架</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>

<ul>
<li>g 参数表示全局安装，这样在任意目录都可以使用 vue 脚本创建项目</li>
</ul>
<br>



<p><strong>创建项目</strong></p>
<p>使用在需要创建项目的文件夹下打开命令行操作，输入指令回车后会跳转到vue创建项目的网站中去</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure>

<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231104152637.png" style="zoom: 50%;">

<p>在这里可以进行vue项目的创建</p>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231104153005.png" style="zoom:50%;">

<br>



<p><strong>安装 devtools</strong></p>
<ul>
<li>devtools 插件网址：<a target="_blank" rel="noopener" href="https://devtools.vuejs.org/guide/installation.html">https://devtools.vuejs.org/guide/installation.html</a></li>
</ul>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105145007.png" style="zoom: 50%;">

<br>



<p><strong>运行vue</strong></p>
<p>在项目文件夹里打开终端输入指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105145350.png" style="zoom: 67%;">

<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105145500.png" style="zoom:67%;">

<br>



<p><strong>修改端口号</strong></p>
<ul>
<li>文档地址：<a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/dev-server/#devserverport">DevServer | webpack</a></li>
<li>在vue.config.js中添加一下代码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<p><strong>添加代理</strong></p>
<p>为了避免前后端服务器联调时， fetch、xhr 请求产生跨域问题，需要配置代理</p>
<ul>
<li><p>文档地址：<a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/dev-server/#devserverport">DevServer | webpack</a></p>
</li>
<li><p>打开 vue.config.js 添加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">   <span class="attr">port</span>: <span class="number">7070</span>,</span><br><span class="line">   <span class="attr">proxy</span>: &#123;</span><br><span class="line">     <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">       <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">       <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<br>



<p><strong>Vue项目结构</strong></p>
<p><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105150531.png"></p>
<ul>
<li>assets - 静态资源</li>
<li>components - 可重用组件</li>
<li>router - 路由</li>
<li>store - 数据共享</li>
<li>views - 视图组件</li>
</ul>
<p>以后还会添加</p>
<ul>
<li>api - 跟后台交互，发送 fetch、xhr 请求，接收响应</li>
<li>plugins - 插件</li>
</ul>
<br>



<hr>
<h3 id="2-Vue组件"><a href="#2-Vue组件" class="headerlink" title="2. Vue组件"></a>2. Vue组件</h3><p>Vue 的组件文件以 .vue 结尾，每个组件由三部分组成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>template 模板部分，由它生成 html 代码</li>
<li>script 代码部分，控制模板的数据来源和行为</li>
<li>style 样式部分，一般不咋关心</li>
</ul>
<br>

<p>先删除App.vue原有代码，来个 Hello, World 例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &quot;Hello, Vue!&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>解释</p>
<ul>
<li>export default 导出组件对象，供 main.js 导入使用</li>
<li>这个对象有一个 data 方法，返回一个<strong>对象</strong>，给 template 提供数据</li>
<li><code>&#123;&#123;&#125;&#125;</code> 在 Vue 里称之为插值表达式，用来<strong>绑定</strong> data 方法返回的<strong>对象</strong>属性，<strong>绑定</strong>的含义是数据发生变化时，页面显示会同步变化</li>
</ul>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105152017.png" style="zoom:80%;">

<br>



<h4 id="2-1-文本插值"><a href="#2-1-文本插值" class="headerlink" title="2.1 文本插值"></a>2.1 文本插值</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; name &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; age &gt; 60 ? &#x27;老年&#x27; : &#x27;青年&#x27; &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; name: &#x27;张三&#x27;, age: 70 &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>&#123;&#123;&#125;&#125;</code> 里只能绑定一个属性，绑定多个属性需要用多个 <code>&#123;&#123;&#125;&#125;</code> 分别绑定</li>
<li>template 内只能有一个根元素</li>
<li>插值内可以进行简单的表达式计算</li>
</ul>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105154158.png" style="zoom:80%;">

<br>



<h4 id="2-2-属性绑定"><a href="#2-2-属性绑定" class="headerlink" title="2.2 属性绑定"></a>2.2 属性绑定</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;text&quot; v-bind:value=&quot;name&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;date&quot; v-bind:value=&quot;birthday&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;text&quot; :value=&quot;age&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; name: &#x27;王五&#x27;, birthday: &#x27;1995-05-01&#x27;, age: 20 &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>简写方式：可以省略 v-bind 只保留冒号</li>
</ul>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105154654.png" style="zoom:80%;">

<br>



<h4 id="2-3-事件绑定"><a href="#2-3-事件绑定" class="headerlink" title="2.3 事件绑定"></a>2.3 事件绑定</h4><h4 id><a href="#" class="headerlink" title></a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 事件绑定 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;button&quot; value=&quot;点我执行m1&quot; v-on:click=&quot;m1&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;button&quot; value=&quot;点我执行m2&quot; @click=&quot;m2&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123;count&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; count: 0 &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        m1() &#123;</span><br><span class="line">            this.count ++;</span><br><span class="line">            console.log(&quot;m1&quot;)</span><br><span class="line">        &#125;,</span><br><span class="line">        m2() &#123;</span><br><span class="line">            this.count --;</span><br><span class="line">            console.log(&quot;m2&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>简写方式：可以把 v-on: 替换为 @</li>
<li>在 methods 方法中的 this 代表的是 data 函数返回的数据对象</li>
</ul>
<p><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231105213826.png"></p>
<br>



<h4 id="2-4-双向绑定"><a href="#2-4-双向绑定" class="headerlink" title="2.4 双向绑定"></a>2.4 双向绑定</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请输入姓名&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请输入年龄&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; v-model=&quot;age&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请选择性别&lt;/label&gt;</span><br><span class="line">            男 &lt;input type=&quot;radio&quot; value=&quot;男&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">            女 &lt;input type=&quot;radio&quot; value=&quot;女&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请选择爱好&lt;/label&gt;</span><br><span class="line">            游泳 &lt;input type=&quot;checkbox&quot; value=&quot;游泳&quot; v-model=&quot;fav&quot;&gt;</span><br><span class="line">            打球 &lt;input type=&quot;checkbox&quot; value=&quot;打球&quot; v-model=&quot;fav&quot;&gt;</span><br><span class="line">            健身 &lt;input type=&quot;checkbox&quot; value=&quot;健身&quot; v-model=&quot;fav&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; name: &#x27;&#x27;, age: null, sex:&#x27;男&#x27; , fav:[&#x27;打球&#x27;]&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>用 v-model 实现双向绑定，即 <ul>
<li>JavaScript 数据可以同步到表单标签</li>
<li>反过来用户在表单标签输入的新值也会同步到 JavaScript 这边</li>
</ul>
</li>
<li>双向绑定只适用于表单这种带【输入】功能的标签，其它标签的数据绑定，单向就足够了</li>
<li>复选框这种标签，双向绑定的 JavaScript 数据类型一般用数组</li>
</ul>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231106132653.png" style="zoom:67%;">

<br>



<h4 id="2-5-计算属性"><a href="#2-5-计算属性" class="headerlink" title="2.5 计算属性"></a>2.5 计算属性</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 计算属性 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">//        &lt;h2&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; firstName: &#x27;哥&#x27;, lastName: &#x27;正&#x27; &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    /* methods: &#123;</span><br><span class="line">        fullName() &#123;</span><br><span class="line">            console.log(&#x27;进入了 fullName&#x27;)</span><br><span class="line">            return this.lastName + this.firstName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,*/</span><br><span class="line">    computed: &#123;</span><br><span class="line">        fullName() &#123;</span><br><span class="line">            console.log(&#x27;进入了 fullName&#x27;)</span><br><span class="line">            return this.lastName + this.firstName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br></pre></td></tr></table></figure>

<ul>
<li>普通方法调用必须加 ()，没有缓存功能</li>
<li>计算属性使用时就把它当属性来用，不加 ()，有缓存功能：<ul>
<li>一次计算后，会将结果缓存，下次再计算时，只要数据没有变化，不会重新计算，直接返回缓存结果</li>
</ul>
</li>
</ul>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20231106134344.png" style="zoom:67%;">

<br>

<hr>
<h3 id="3-axios"><a href="#3-axios" class="headerlink" title="3. axios"></a>3. axios</h3><p>axios 它的底层是用了 XMLHttpRequest（xhr）方式发送请求和接收响应，xhr 相对于之前讲过的 fetch api 来说，功能更强大，但由于是比较老的 api，不支持 Promise，axios 对 xhr 进行了封装，使之支持 Promise，并提供了对请求、响应的统一拦截功能</p>
<p>安装</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios -S</span><br></pre></td></tr></table></figure>

<p>导入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>axios 默认导出一个对象，这里的 import 导入的就是它默认导出的对象</li>
</ul>
<p>方法</p>
<table>
<thead>
<tr>
<th>请求</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>axios.get(url[, config])</td>
<td></td>
</tr>
<tr>
<td>axios.delete(url[, config])</td>
<td></td>
</tr>
<tr>
<td>axios.head(url[, config])</td>
<td></td>
</tr>
<tr>
<td>axios.options(url[, config])</td>
<td></td>
</tr>
<tr>
<td>axios.post(url[, data[, config]])</td>
<td></td>
</tr>
<tr>
<td>axios.put(url[, data[, config]])</td>
<td></td>
</tr>
<tr>
<td>axios.patch(url[, data[, config]])</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>config - 选项对象、例如查询参数、请求头…</li>
<li>data - 请求体数据、最常见的是 json 格式数据</li>
<li>get、head 请求无法携带请求体，这应当是浏览器的限制所致（xhr、fetch api 均有限制）</li>
<li>options、delete 请求可以通过 config 中的 data 携带请求体</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;获取远程数据&quot; @click=&quot;sendReq()&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        async sendReq() &#123;</span><br><span class="line">            // 1. 演示 get, post</span><br><span class="line">            const resp1 = await axios.get(&#x27;/api/a2&#x27;);</span><br><span class="line">            const resp2 = await axios.post(&#x27;/api/a2&#x27;);</span><br><span class="line"></span><br><span class="line">            // 2. 发送请求头</span><br><span class="line">            const resp3 = await axios.post(&#x27;/api/a3&#x27;,&#123;&#125;,&#123;</span><br><span class="line">                 headers:&#123;</span><br><span class="line">                     Authorization:&#x27;abc&#x27;</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            // 3. 发送请求时携带查询参数 ?name=xxx&amp;age=xxx</span><br><span class="line">            const name = encodeURIComponent(&#x27;&amp;&amp;&amp;&#x27;);</span><br><span class="line">            const age = 18;</span><br><span class="line">            const resp4 = await axios.post(`/api/a4?name=$&#123;name&#125;&amp;age=$&#123;age&#125;`);</span><br><span class="line"></span><br><span class="line">            // 不想自己拼串、处理特殊字符、就用下面的办法</span><br><span class="line">            const resp5 = await axios.post(&#x27;/api/a4&#x27;, &#123;&#125;, &#123;</span><br><span class="line">               params: &#123;</span><br><span class="line">                    name:&#x27;&amp;&amp;&amp;&amp;&#x27;,</span><br><span class="line">                    age: 20</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            // 4. 用请求体发数据，格式为 urlencoded</span><br><span class="line">            const params1 = new URLSearchParams();</span><br><span class="line">            params1.append(&quot;name&quot;, &quot;张三&quot;);</span><br><span class="line">            params1.append(&quot;age&quot;, 24)</span><br><span class="line"></span><br><span class="line">            const resp6 = await axios.post(&#x27;/api/a4&#x27;, params);</span><br><span class="line"></span><br><span class="line">            // 5. 用请求体发数据，格式为 multipart</span><br><span class="line">            const params2 = new FormData();</span><br><span class="line">            params2.append(&quot;name&quot;, &quot;李四&quot;);</span><br><span class="line">            params2.append(&quot;age&quot;, 30);</span><br><span class="line">            const resp7 = await axios.post(&#x27;/api/a5&#x27;, params);</span><br><span class="line"></span><br><span class="line">            // 6. 用请求体发数据，格式为 json</span><br><span class="line">            const resp8 = await axios.post(&#x27;/api/a5json&#x27;, &#123;</span><br><span class="line">                name: &#x27;王五&#x27;,</span><br><span class="line">                age: 50</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            console.log(resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>创建实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(config);</span><br></pre></td></tr></table></figure>

<ul>
<li>axios 对象可以直接使用，但使用的是默认的设置</li>
<li>用 axios.create 创建的对象，可以覆盖默认设置，config 见下面说明</li>
</ul>
<p><strong>常见的 config 项有</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>baseURL</td>
<td>将自动加在 url 前面</td>
</tr>
<tr>
<td>headers</td>
<td>请求头，类型为简单对象</td>
</tr>
<tr>
<td>params</td>
<td>跟在 URL 后的请求参数，类型为简单对象或 URLSearchParams</td>
</tr>
<tr>
<td>data</td>
<td>请求体，类型有简单对象、FormData、URLSearchParams、File 等</td>
</tr>
<tr>
<td>withCredentials</td>
<td>跨域时是否携带 Cookie 等凭证，默认为 false</td>
</tr>
<tr>
<td>responseType</td>
<td>响应类型，默认为 json</td>
</tr>
</tbody></table>
<p>例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">    <span class="attr">withCredentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">await</span> _axios.<span class="title function_">post</span>(<span class="string">&#x27;/api/a6set&#x27;</span>)</span><br><span class="line"><span class="keyword">await</span> _axios.<span class="title function_">post</span>(<span class="string">&#x27;/api/a6get&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>生产环境希望 xhr 请求不走代理，可以用 baseURL 统一修改</li>
<li>希望跨域请求携带 cookie，需要配置 withCredentials: true，服务器也要配置 allowCredentials &#x3D; true，否则浏览器获取跨域返回的 cookie 时会报错</li>
</ul>
<br>



<p><strong>响应格式</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>data</td>
<td>响应体数据</td>
</tr>
<tr>
<td>status</td>
<td>状态码</td>
</tr>
<tr>
<td>headers</td>
<td>响应头</td>
</tr>
</tbody></table>
<ul>
<li>200 表示响应成功</li>
<li>400 请求数据不正确 age&#x3D;abc</li>
<li>401 身份验证没通过</li>
<li>403 没有权限</li>
<li>404 资源不存在</li>
<li>405 不支持请求方式 post</li>
<li>500 服务器内部错误</li>
</ul>
<br>



<p>请求拦截器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 比如在这里添加统一的 headers</span></span><br><span class="line">      config.<span class="property">headers</span> = &#123;</span><br><span class="line">          <span class="title class_">Authorization</span>: <span class="string">&#x27;aaa.bbb.ccc&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>响应拦截器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// 2xx 范围内走这里</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 超出 2xx, 比如 4xx, 5xx 走这里</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>这里的 _axios 是自己创建的axios对象</p>
</li>
<li><p>请求拦截器中第一个方法是请求正常的情况下要执行的拦截动作，第二个方法是请求拦截异常的情况下要执行的拦截动作</p>
</li>
<li><p>响应拦截器中第一个方法是响应正常的情况下要执行的拦截动作，第二个方法是响应拦截异常的情况下要执行的拦截动作</p>
</li>
<li><p>响应时出现的异常可以放在响应拦截器中的第二个方法中去，如下所示</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">400</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求参数不正确&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">400</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跳转至登录页面&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">401</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;资源未找到&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">404</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<p>把上面的代码抽取到一个js文件中去</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="comment">// baseURL: &#x27;http://localhost:8080&#x27;,</span></span><br><span class="line">    <span class="attr">withCredentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 比如在这里添加统一的 headers</span></span><br><span class="line">      config.<span class="property">headers</span> = &#123;</span><br><span class="line">          <span class="title class_">Authorization</span>: <span class="string">&#x27;aaa.bbb.ccc&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">400</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求参数不正确&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">400</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跳转至登录页面&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">401</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;资源未找到&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">404</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _axios;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="二-Vue2进阶"><a href="#二-Vue2进阶" class="headerlink" title="二. Vue2进阶"></a>二. Vue2进阶</h2><h3 id="1-ElementUI"><a href="#1-ElementUI" class="headerlink" title="1. ElementUI"></a>1. ElementUI</h3><p>安装：在vue项目文件下打开命令行输入以下安装代码</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-ui -S</span><br></pre></td></tr></table></figure>

<p>安装完后在package.json文件中会引入element-ui的依赖<br><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231110144914074.png" style="zoom:67%;"></p>
<br>



<p>引入组件</p>
<p>把下面的代码放入main.js中，Vue.use(Element)要放在new Vue前面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Element</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Element</span>)</span><br></pre></td></tr></table></figure>

<br>



<h4 id="1-1-表格组件"><a href="#1-1-表格组件" class="headerlink" title="1.1 表格组件"></a>1.1 表格组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-table :data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;性别&quot; prop=&quot;sex&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;年龄&quot; prop=&quot;age&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../utils/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    async mounted() &#123;</span><br><span class="line">        const resp = await axios.get(&#x27;/api/students&#x27;);</span><br><span class="line">        this.students = resp.data.data</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>el-table：表格<ul>
<li>data：要展示的数据对象</li>
</ul>
</li>
<li>el-table-column：表格中的列<ul>
<li>label：命名</li>
<li>prop：数据对象对应的属性</li>
</ul>
</li>
</ul>
<img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231110152129499.png" style="zoom: 50%;">

<br>



<h4 id="1-2-分页组件"><a href="#1-2-分页组件" class="headerlink" title="1.2 分页组件"></a>1.2 分页组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-table :data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;性别&quot; prop=&quot;sex&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;年龄&quot; prop=&quot;age&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;el-pagination </span><br><span class="line">            :total=&quot;total&quot;</span><br><span class="line">            :page-size=&quot;queryDto.size&quot;</span><br><span class="line">            :current-page=&quot;queryDto.page&quot;</span><br><span class="line">            layout=&quot;prev,pager,next,sizes,-&gt;,total&quot;</span><br><span class="line">            :page-sizes=&quot;[5,10,15,20]&quot;</span><br><span class="line">            @current-change=&quot;currentChange&quot;</span><br><span class="line">            @size-change=&quot;sizeChange&quot;</span><br><span class="line">        &gt;&lt;/el-pagination&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../utils/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.query();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        currentChange(page) &#123;</span><br><span class="line">            this.queryDto.page = page;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        sizeChange(size) &#123;</span><br><span class="line">            this.queryDto.size = size;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        async query() &#123;</span><br><span class="line">            const resp = await axios.get(&#x27;/api/students/q&#x27;, &#123;</span><br><span class="line">                params: this.queryDto</span><br><span class="line">            &#125;);</span><br><span class="line">            this.students = resp.data.data.list;</span><br><span class="line">            this.total = resp.data.data.total;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: [],</span><br><span class="line">            queryDto: &#123;</span><br><span class="line">                page: 1,</span><br><span class="line">                size: 5</span><br><span class="line">            &#125;,</span><br><span class="line">            total: 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>el-pagination：element-ui分页组件</p>
<ul>
<li>有 : 和 没有 : 的区别，有:表示该属性的值会去data中去查找，没有则是给定固定值</li>
<li>total： 总数量</li>
<li>page-size：每页条目个数，可以自定义<ul>
<li>:page-sizes&#x3D;”[5,10,15,20]” ：自定义每页条目数</li>
</ul>
</li>
<li>layout：组件布局，子组件名用逗号分隔（决定页面显示哪些组件）sizes<code>, </code>prev<code>, </code>pager<code>, </code>next<code>, </code>jumper<code>, </code>-&gt;<code>, </code>total<code>, </code>slot</li>
<li>@current-change：current- page改变时会触发，这里通过调用自定义函数currentChange来改变data中的page，来实现数据的双向绑定</li>
<li>@size-change：page-size改变时会触发，这里通过调用自定义函数sizeChange来改变data中的size，来实现数据的双向绑定</li>
</ul>
</li>
<li><p>query()函数：把向前端的请求封装成方法，方便调用。刚开始加载页面时会调用（钩子函数中），页数改变时会调用（currentChange函数中），每页条目个数改变时会调用（sizeChange函数中）</p>
</li>
<li><p>this.students &#x3D; resp.data.data.list和this.total &#x3D; resp.data.data.total     因为后端返回的数据中的data是一个map集合</p>
</li>
</ul>
<p><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231110223807689.png"></p>
<br>



<h4 id="1-3-分页搜索"><a href="#1-3-分页搜索" class="headerlink" title="1.3 分页搜索"></a>1.3 分页搜索</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- 输入框，用于输入姓名 --&gt;</span><br><span class="line">        &lt;el-input placeholder=&quot;请输入姓名&quot; size=&quot;mini&quot; v-model=&quot;queryDto.name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- 下拉选择框，用于选择性别 --&gt;</span><br><span class="line">        &lt;el-select placeholder=&quot;请选择性别&quot; size=&quot;mini&quot; v-model=&quot;queryDto.sex&quot;&gt;</span><br><span class="line">            &lt;el-option value=&quot;&quot; label=&quot;无限制&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;男&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;女&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- 下拉选择框，用于选择年龄范围 --&gt;</span><br><span class="line">        &lt;el-select placeholder=&quot;请选择年龄&quot; size=&quot;mini&quot; v-model=&quot;queryDto.age&quot;&gt;</span><br><span class="line">            &lt;el-option value=&quot;&quot; label=&quot;无限制&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;0,20&quot; label=&quot;0到20&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;21,40&quot; label=&quot;21到40&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;41,60&quot; label=&quot;41到60&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;61,200&quot; label=&quot;61岁以上&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- 按钮，点击后进行搜索 --&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; size=&quot;mini&quot; @click=&quot;search()&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- 表格，用于显示学生数据 --&gt;</span><br><span class="line">        &lt;el-table :data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;性别&quot; prop=&quot;sex&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;年龄&quot; prop=&quot;age&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- 分页器，用于切换页面和调整每页显示的数量 --&gt;</span><br><span class="line">        &lt;el-pagination </span><br><span class="line">            :total=&quot;total&quot;</span><br><span class="line">            :page-size=&quot;queryDto.size&quot;</span><br><span class="line">            :current-page=&quot;queryDto.page&quot;</span><br><span class="line">            layout=&quot;prev,pager,next,sizes,-&gt;,total&quot;</span><br><span class="line">            :page-sizes=&quot;[5,10,15,20]&quot;</span><br><span class="line">            @current-change=&quot;currentChange&quot;</span><br><span class="line">            @size-change=&quot;sizeChange&quot;</span><br><span class="line">        &gt;&lt;/el-pagination&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../utils/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    // 组件挂载后立即执行查询</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.query();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        // 搜索方法，执行查询</span><br><span class="line">        search() &#123;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        // 当前页改变时的处理方法</span><br><span class="line">        currentChange(page) &#123;</span><br><span class="line">            this.queryDto.page = page;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        // 每页显示数量改变时的处理方法</span><br><span class="line">        sizeChange(size) &#123;</span><br><span class="line">            this.queryDto.size = size;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        // 查询方法，从后端获取数据</span><br><span class="line">        async query() &#123;</span><br><span class="line">            const resp = await axios.get(&#x27;/api/students/q&#x27;, &#123;</span><br><span class="line">                params: this.queryDto</span><br><span class="line">            &#125;);</span><br><span class="line">            this.students = resp.data.data.list;</span><br><span class="line">            this.total = resp.data.data.total;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 组件的初始数据</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: [], // 学生数据</span><br><span class="line">            queryDto: &#123; // 查询参数</span><br><span class="line">                name: &#x27;&#x27;,</span><br><span class="line">                sex: &#x27;&#x27;,</span><br><span class="line">                age: &#x27;&#x27;,</span><br><span class="line">                page: 1,</span><br><span class="line">                size: 5</span><br><span class="line">            &#125;,</span><br><span class="line">            total: 0 // 总数</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* 设置输入框和选择框的宽度和边距 */</span><br><span class="line">.el-input--mini,</span><br><span class="line">.el-select--mini &#123;</span><br><span class="line">    width: 193px;</span><br><span class="line">    margin: 10px 10px 0 0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>el-option中的value是传给后端的值，label是显示在前端页面的值，如果没有添加label属性则把value显示在前端页面</li>
<li>输入框和选择框都可以通过v-model实现数据的双向绑定</li>
</ul>
<p><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231112203941703.png"></p>
<p><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231112204017960.png"></p>
<p><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231112204043990.png"></p>
<br>



<h4 id="1-4-级联选择器"><a href="#1-4-级联选择器" class="headerlink" title="1.4 级联选择器"></a>1.4 级联选择器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- el-cascader 组件用于显示级联选择器 --&gt;</span><br><span class="line">    &lt;el-cascader :options=&quot;ops&quot; clearable&gt;&lt;/el-cascader&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            // ops 是级联选择器的选项数据</span><br><span class="line">            ops:[</span><br><span class="line">                // 第一级选项：菜品</span><br><span class="line">                &#123;value:100 ,label:&#x27;菜品&#x27; ,children:[</span><br><span class="line">                    // 第二级选项：湘菜</span><br><span class="line">                    &#123;value:110, label:&#x27;湘菜&#x27;, children:[</span><br><span class="line">                        // 第三级选项：剁椒鱼头</span><br><span class="line">                        &#123;value:111, label:&#x27;剁椒鱼头&#x27;&#125;,</span><br><span class="line">                        // 第三级选项：辣椒炒肉</span><br><span class="line">                        &#123;value:112, label:&#x27;辣椒炒肉&#x27;&#125;</span><br><span class="line">                    ]&#125;,</span><br><span class="line">                    // 第二级选项：川菜</span><br><span class="line">                    &#123;value:120, label:&#x27;川菜&#x27;, children:[</span><br><span class="line">                        // 第三级选项：红烧兔头</span><br><span class="line">                        &#123;value:121, label:&#x27;红烧兔头&#x27;&#125;,</span><br><span class="line">                        // 第三级选项：宫保鸡丁</span><br><span class="line">                        &#123;value:122, label:&#x27;宫保鸡丁&#x27;&#125;</span><br><span class="line">                    ]&#125;,</span><br><span class="line">                    // 第二级选项：粤菜</span><br><span class="line">                    &#123;value:130, label:&#x27;粤菜&#x27;, children:[</span><br><span class="line">                        // 第三级选项：白切鸡</span><br><span class="line">                        &#123;value:131, label:&#x27;白切鸡&#x27;&#125;,</span><br><span class="line">                        // 第三级选项：蜜汁叉烧</span><br><span class="line">                        &#123;value:132, label:&#x27;蜜汁叉烧&#x27;&#125;</span><br><span class="line">                    ]&#125;</span><br><span class="line">                ]&#125;,</span><br><span class="line">                // 第一级选项：饮品</span><br><span class="line">                &#123;value:200 ,label:&#x27;饮品&#x27; ,children:[</span><br><span class="line">                    // 第二级选项：饮料</span><br><span class="line">                    &#123;value:210, label:&#x27;饮料&#x27;, children:[</span><br><span class="line">                        // 第三级选项：王老吉</span><br><span class="line">                        &#123;value:211, label:&#x27;王老吉&#x27;&#125;,</span><br><span class="line">                        // 第三级选项：可乐</span><br><span class="line">                        &#123;value:212, label:&#x27;可乐&#x27;&#125;,</span><br><span class="line">                        // 第三级选项：雪碧</span><br><span class="line">                        &#123;value:213, label:&#x27;雪碧&#x27;&#125;</span><br><span class="line">                    ]&#125;,</span><br><span class="line">                    // 第二级选项：啤酒</span><br><span class="line">                    &#123;value:220, label:&#x27;啤酒&#x27;, children:[</span><br><span class="line">                        // 第三级选项：雪花</span><br><span class="line">                        &#123;value:221, label:&#x27;雪花&#x27;&#125;,</span><br><span class="line">                        // 第三级选项：百威</span><br><span class="line">                        &#123;value:222, label:&#x27;百威&#x27;&#125;</span><br><span class="line">                    ]&#125;,</span><br><span class="line">                    // 第二级选项：白酒</span><br><span class="line">                    &#123;value:230, label:&#x27;白酒&#x27;, children:[</span><br><span class="line">                        // 第三级选项：茅台</span><br><span class="line">                        &#123;value:231, label:&#x27;茅台&#x27;&#125;,</span><br><span class="line">                        // 第三级选项：江小白</span><br><span class="line">                        &#123;value:232, label:&#x27;江小白&#x27;&#125;</span><br><span class="line">                    ]&#125;</span><br><span class="line">                ]&#125;,</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20231112212003863.png"></p>
<br>






      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/11/04/Vue2%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" data-id="clywa1f4l001xecve5ymqat5z" data-title="Vue2基础知识" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-JS" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/11/01/JS/" class="article-date">
  <time class="dt-published" datetime="2023-11-01T06:57:33.000Z" itemprop="datePublished">2023-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/11/01/JS/">JavaScript</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Javascript是一种脚本语言，可以用来更改页面内容，控制多媒体，制作图像、动画等等</p>
<p>该笔记基于b站视频完成<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Tt4y1772f/?share_source=copy_web&vd_source=db8e7458ec195ac74979ce5478cbc624">Java开发所需的前端技术教学</a></p>
<h3 id="1-js入门案例"><a href="#1-js入门案例" class="headerlink" title="1. js入门案例"></a>1. js入门案例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>js入门<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>1111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        a.<span class="property">innerText</span> = <span class="string">&quot;3333333&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231101150137.png" style="zoom: 50%;">

<p>document.getElementById()	根据元素id获取元素对象</p>
<br>



<p><strong>js文件的引用</strong></p>
<img src="/2023/11/01/JS/20231101150530.png" style="zoom: 67%;">

<p>1.js文件的内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>);</span><br><span class="line">a.<span class="property">innerText</span> = <span class="string">&quot;44444&quot;</span>;</span><br></pre></td></tr></table></figure>

<br>

<hr>
<h3 id="2-变量"><a href="#2-变量" class="headerlink" title="2. 变量"></a>2. 变量</h3><p><strong>let</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> 变量名 = 值;</span><br></pre></td></tr></table></figure>

<ul>
<li>let声明的变量可以多次赋值</li>
</ul>
<br>

<p><strong>const</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> 变量名 = 值;</span><br></pre></td></tr></table></figure>

<ul>
<li>const修饰的为常量，只能赋值一次，不能再次赋值，但是值的内容可以改</li>
</ul>
<p><img src="/2023/11/01/JS/20231101153056.png"></p>
<br>

<p><strong>var</strong></p>
<p>var声明的变量是可以多次赋值的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">a = <span class="number">200</span>;</span><br></pre></td></tr></table></figure>

<br>



<hr>
<h3 id="3-数据类型"><a href="#3-数据类型" class="headerlink" title="3. 数据类型"></a>3. 数据类型</h3><h4 id="3-1-undefined和null"><a href="#3-1-undefined和null" class="headerlink" title="3.1 undefined和null"></a>3.1 undefined和null</h4><ul>
<li>执行表达式或函数，没有返回结果，出现undefined</li>
<li>访问数字不存在的元素，访问对象不存在的属性，出现undefined</li>
<li>定义变量没有初始化，出现undefined</li>
</ul>
<p>二者共同点</p>
<ul>
<li>都没有属性、方法</li>
<li>Nullish</li>
</ul>
<p>二者区别</p>
<ul>
<li>undefined由js产生</li>
<li>null由程序员提供</li>
</ul>
<img src="/2023/11/01/JS/20231101154218.png" style="zoom:67%;">

<br>



<h4 id="3-2-string"><a href="#3-2-string" class="headerlink" title="3.2 string"></a>3.2 string</h4><p>在JavaScript中可以用单引号、双引号、反引号定义字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="string">&#x27;spring&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> s2 = <span class="string">&quot;spring&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> s3 = <span class="string">`spring`</span>;</span><br></pre></td></tr></table></figure>

<br>
模板字符串（Template strings）

<p>需求：拼接url的请求参数，如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/test?name=zheng&amp;age=18</span><br><span class="line">/test?name=li&amp;age=20</span><br></pre></td></tr></table></figure>

<p>传统方法拼接</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = ; <span class="comment">// zheng li ...</span></span><br><span class="line"><span class="keyword">let</span> age = ; <span class="comment">// 18 20 ...</span></span><br><span class="line"><span class="keyword">let</span> uri = <span class="string">&quot;/test?name=&quot;</span> + name + <span class="string">&quot;&amp;age=&quot;</span> + age;</span><br></pre></td></tr></table></figure>

<p>模板字符串方式，要用反引号</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = ; <span class="comment">// zheng li ...</span></span><br><span class="line"><span class="keyword">let</span> age = ; <span class="comment">// 18 20 ...</span></span><br><span class="line"><span class="keyword">let</span> uri = <span class="string">`/test?name=<span class="subst">$&#123;name&#125;</span>&amp;age=<span class="subst">$&#123;age&#125;</span>`</span>;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231101160325.png" style="zoom:80%;">

<br>



<h4 id="3-3-number和bigint"><a href="#3-3-number和bigint" class="headerlink" title="3.3 number和bigint"></a>3.3 number和bigint</h4><p>number 类型标识的是双精度浮动小数，例如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> / <span class="number">3</span>;   <span class="comment">// 结果 3.3333333333333335</span></span><br></pre></td></tr></table></figure>

<p>既然是浮点小数，那么可以除零</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> / <span class="number">0</span>;	  <span class="comment">// 结果 Infinity 正无穷大</span></span><br><span class="line">-<span class="number">10</span> / <span class="number">0</span>;  <span class="comment">// 结果 -Infinity 负无穷大</span></span><br></pre></td></tr></table></figure>

<p>浮点小数都有运算精度问题，例如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.0</span> - <span class="number">1.1</span>; <span class="comment">// 结果 0.8999999999999999</span></span><br></pre></td></tr></table></figure>

<p>字符串转数字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10&quot;</span>); 	<span class="comment">// 结果是数字 10 </span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10.5&quot;</span>);	<span class="comment">// 结果是数字 10, 去除了小数部分</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10&quot;</span>) / <span class="number">3</span>; <span class="comment">// 结果仍视为 number 浮点数, 因此结果为 3.3333333333333335</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;abc&quot;</span>);	<span class="comment">// 转换失败，结果是特殊值 NaN (Not a Number)</span></span><br></pre></td></tr></table></figure>

<p>要表示真正的整数，需要用 bigint，数字的结尾用 n 表示它是一个 bigint 类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10n</span> / <span class="number">3n</span>;			<span class="comment">// 结果 3n, 按整数除法处理</span></span><br></pre></td></tr></table></figure>

<br>



<h4 id="3-4-boolean"><a href="#3-4-boolean" class="headerlink" title="3.4 boolean"></a>3.4 boolean</h4><ul>
<li>Truthy</li>
<li>Falsy</li>
</ul>
<p>在 js 中，并不是 boolean 才能用于条件判断，你可以在 if 语句中使用【数字】、【字符串】… 作为判断条件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(b) &#123; <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102124803.png" style="zoom:67%;">

<p>这时就有一个规则，当需要条件判断时，这个值被当作 true 还是 false，当作 true 的值归类为 truthy，当作 false 的值归类为 falsy</p>
<p>下面值都是 falsy</p>
<ul>
<li><code>false</code></li>
<li><code>Nullish (null, undefined)</code></li>
<li><code>0, 0n, NaN</code></li>
<li><code>&quot;&quot; &#39;&#39; ``</code>  即长度为零的字符串</li>
</ul>
<p>剩余的值绝大部分都是 truthy</p>
<p>有几个容易被当作 falsy 实际是 truthy 的</p>
<ul>
<li><code>&quot;false&quot;, &quot;0&quot;</code> 即字符串的 false 和 字符串的零</li>
<li><code>[]</code> 空数组</li>
<li><code>&#123;&#125;</code> 空对象</li>
</ul>
<br>

<hr>
<h3 id="4-函数"><a href="#4-函数" class="headerlink" title="4. 函数"></a>4. 函数</h3><h4 id="4-1-定义函数"><a href="#4-1-定义函数" class="headerlink" title="4.1 定义函数"></a>4.1 定义函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名(参数) &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名(实参);</span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>);     <span class="comment">// 返回 3</span></span><br></pre></td></tr></table></figure>

<p>js 中的函数调用特点：对参数的<strong>类型</strong>和<strong>个数</strong>都没有限制，例如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>);  <span class="comment">// 返回 ab</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);   <span class="comment">// 返回 9, 第三个参数没有被用到, 不会报错</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>);			<span class="comment">// 返回 NaN, 这时 b 没有定义是 undefined, undefined 做数学运算结果就是 NaN</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/11/01/JS/20231102125835.png"></p>
<br>



<h4 id="4-2-默认参数"><a href="#4-2-默认参数" class="headerlink" title="4.2 默认参数"></a>4.2 默认参数</h4><p>java 中（spring）要实现默认参数的效果得这么做：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">page</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(defaultValue=&quot;1&quot;)</span> <span class="type">int</span> page, </span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(defaultValue=&quot;10&quot;)</span> <span class="type">int</span> size</span></span><br><span class="line"><span class="params">    )</span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pagination</span>(<span class="params">page = <span class="number">1</span>, size = <span class="number">10</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(page, size);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试案例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两个参数都默认</span></span><br><span class="line"><span class="title function_">pagination</span>();</span><br><span class="line"><span class="comment">// 第一个参数默认，第二个参数自己设置</span></span><br><span class="line"><span class="title function_">pagination</span>(<span class="literal">undefined</span>, <span class="number">100</span>);</span><br><span class="line"><span class="comment">// 第一个参数自己设置，第二个参数默认</span></span><br><span class="line"><span class="title function_">pagination</span>(<span class="number">100</span>);</span><br><span class="line"><span class="comment">// 两个参数的自己设置</span></span><br><span class="line"><span class="title function_">pagination</span>(<span class="number">100</span>,<span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102130659.png" style="zoom:80%;">

<br>



<h4 id="4-3-匿名函数"><a href="#4-3-匿名函数" class="headerlink" title="4.3 匿名函数"></a>4.3 匿名函数</h4><p>语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">参数</span>) &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用场景——定义完毕立即调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102152417.png" style="zoom:67%;">

<p>使用场景——作为其它对象的方法</p>
<p>页面元素：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p id = <span class="string">&quot;p1&quot;</span>&gt;点我啊&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>该元素有一个onclick方法，鼠标点击后会调用该方法，onclick方法初始化为null，需要赋值后才能使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;鼠标被单击了----&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102153423.png" style="zoom:67%;">

<br>



<h4 id="4-4-箭头函数"><a href="#4-4-箭头函数" class="headerlink" title="4.4 箭头函数"></a>4.4 箭头函数</h4><p>语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(参数) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果没有参数，()要保留&#96;&#96;</li>
<li>如果只有一个参数，()可以省略</li>
<li>如果函数体内只有一个一行代码，{}可以省略</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;单击&quot;</span>);</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102154038.png" style="zoom:67%;">

<br>



<h4 id="4-5-函数是对象"><a href="#4-5-函数是对象" class="headerlink" title="4.5 函数是对象"></a>4.5 函数是对象</h4><p>以下形式在 js 中非常常见！</p>
<ol>
<li>可以参与赋值，例，具名函数也能参与赋值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">abc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数是对象&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = abc;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>有属性、有方法，执行 <code>console.dir(abc)</code>，输出结果如下</li>
</ol>
<img src="/2023/11/01/JS/20231102154731.png" style="zoom:67%;">

<ul>
<li><p>其中带有 f 标记的是方法，不带的是属性</p>
</li>
<li><p>带有 ➡ 符号的可以继续展开，限于篇幅省略了</p>
</li>
<li><p>带有 <code>[[ ]]</code> 的是内置属性，不能访问，只能查看</p>
</li>
<li><p>相对重要的是 <code>[[Prototype]]</code> 和 <code>[[Scopes]]</code></p>
</li>
</ul>
<ol start="3">
<li>可以作为方法参数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">fn</span>) &#123;          <span class="comment">// fn 将来可以是一个函数对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">    <span class="title function_">fn</span>();                 <span class="comment">// 调用函数对象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">b</span>(a)</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102205224.png" style="zoom:67%;">

<ol start="4">
<li>可以作为方法返回值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">d</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">c</span>()()</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102205343.png" style="zoom:67%;">

<br>



<h4 id="4-6-函数的作用域"><a href="#4-6-函数的作用域" class="headerlink" title="4.6 函数的作用域"></a>4.6 函数的作用域</h4><p>看下面的例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> z = <span class="number">30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 看这里</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>();</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231102205917.png" style="zoom:67%;">

<img src="/2023/11/01/JS/20231102205955.png" style="zoom:67%;">

<ul>
<li>以函数为分界线划定作用域，所有函数之外是全局作用域</li>
<li>查找变量时，由内向外查找<ul>
<li>在内层作用域找到变量，就会停止查找，不会再找外层</li>
<li>所有作用域都找不到变量，报错</li>
</ul>
</li>
<li>作用域本质上是函数对象的属性，可以通过 console.dir 来查看调试</li>
</ul>
<br>



<h4 id="4-7-闭包"><a href="#4-7-闭包" class="headerlink" title="4.7 闭包"></a>4.7 闭包</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>()();  <span class="comment">// 在外面执行了 b</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103144345.png" style="zoom:67%;">

<ul>
<li>函数定义时，它的作用域就已经确定好了，因此无论函数将来去哪里了，它都能从自己的作用域中找到当时的变量</li>
<li>闭包就是指<font color="red">函数能够访问自己作用域中的变量</font></li>
</ul>
<br>



<h4 id="4-8-var与let的区别"><a href="#4-8-var与let的区别" class="headerlink" title="4.8 var与let的区别"></a>4.8 var与let的区别</h4><p>如果函数外层引用的是let变量，那么外层普通的{}也会作为域边界，最外层的let也占一个script作用域</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103150435.png" style="zoom: 67%;">

<br>

<p>如果函数外层引用的是 var 变量，外层普通的 {} 不会视为边界</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103150522.png" style="zoom:67%;">

<br>

<p>如果 var 变量出现了重名，则他俩会被视为同一作用域中的同一个变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> e = <span class="number">20</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);	<span class="comment">// 打印 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);		<span class="comment">// 因为是同一个变量，还是打印 20</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103150703.png" style="zoom:67%;">

<p>&lt;&gt;br&#x2F;&gt;</p>
<p>如果是 let，则视为两个作用域中的两个变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> e = <span class="number">20</span>;	</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);	<span class="comment">// 打印 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);		<span class="comment">// 打印 10</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103150729.png" style="zoom:67%;">

<br>

<p>要想里面的 e 和外面的 e 能区分开来，最简单的办法是改成 let，或者用函数来界定作用域范围</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="number">20</span>;</span><br><span class="line">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);	</span><br></pre></td></tr></table></figure>



<br>



<hr>
<h3 id="5-数组"><a href="#5-数组" class="headerlink" title="5. 数组"></a>5. 数组</h3><h4 id="5-1-语法"><a href="#5-1-语法" class="headerlink" title="5.1 语法"></a>5.1 语法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建数组</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数组元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改数组元素</span></span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数组长度</span></span><br><span class="line">arr.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量数据元素</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103151922.png" style="zoom:67%;">

<br>



<h4 id="5-2-API"><a href="#5-2-API" class="headerlink" title="5.2 API"></a>5.2 API</h4><ul>
<li>push、shift、splice</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; </span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">push</span>(<span class="number">4</span>);    	<span class="comment">// 向数组尾部(右侧)添加元素, 结果 [1,2,3,4]</span></span><br><span class="line">arr.<span class="title function_">shift</span>();		<span class="comment">// 从数组头部(左侧)移除元素, 结果 [2,3,4]</span></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">1</span>,<span class="number">1</span>);	<span class="comment">// 删除【参数1】索引位置的【参数2】个元素，结果 [2,4]</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103152343.png" style="zoom:80%;">

<br>



<ul>
<li>join</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">join</span>(); 		<span class="comment">// 默认使用【,】作为连接符，结果 &#x27;a,b,c,d&#x27;</span></span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);		<span class="comment">// 结果 &#x27;abcd&#x27;</span></span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>);		<span class="comment">// 结果 &#x27;a-b-c-d&#x27;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103152546.png" style="zoom: 80%;">

<br>



<ul>
<li>map、filter、forEach</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">i</span>) &#123;   <span class="comment">// 代表的新旧元素之间的变换规则</span></span><br><span class="line">    <span class="keyword">return</span> i * <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// arr.map(a) // 具名函数，结果 [10,20,30,60]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arr.map( (i) =&gt; &#123;return i * 10&#125; ); // 箭头函数</span></span><br><span class="line">arr.<span class="title function_">map</span>( <span class="function"><span class="params">i</span> =&gt;</span> i * <span class="number">10</span> ); <span class="comment">// 箭头函数</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/11/01/JS/20231103152952.png"></p>
<br>



<ul>
<li>传给 map 的函数，参数代表旧元素，返回值代表新元素</li>
</ul>
<p>map 的内部实现（伪代码）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">map</span>(<span class="params">a</span>) &#123; <span class="comment">// 参数是一个函数</span></span><br><span class="line">    <span class="keyword">let</span> narr = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> o = arr[i]; <span class="comment">// 旧元素</span></span><br><span class="line">        <span class="keyword">let</span> n = <span class="title function_">a</span>(o);   <span class="comment">// 新元素</span></span><br><span class="line">        narr.<span class="title function_">push</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> narr;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>filter 例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line">arr.<span class="title function_">filter</span>( <span class="function">(<span class="params">i</span>)=&gt;</span> i % <span class="number">2</span> == <span class="number">1</span> ); <span class="comment">// 结果 [1,3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>传给 filter 的函数，参数代表旧元素，返回 true 表示要留下的元素</li>
</ul>
<p>forEach 例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*for(let i = 0; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="comment">    console.log(arr[i]);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>( <span class="function">(<span class="params">i</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i) );</span><br></pre></td></tr></table></figure>

<p>两个称呼</p>
<ul>
<li>高阶函数，map，filter，forEach</li>
<li>回调函数，例如作为参数传入的函数</li>
</ul>
<br>



<hr>
<h3 id="6-Object"><a href="#6-Object" class="headerlink" title="6. Object"></a>6. Object</h3><h4 id="6-1-语法"><a href="#6-1-语法" class="headerlink" title="6.1 语法"></a>6.1 语法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    属性名: 值,</span><br><span class="line">    方法名: 函数,</span><br><span class="line">    get 属性名() &#123;&#125;,</span><br><span class="line">    set 属性名(新值) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<p>例1：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小明&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">28</span>,</span><br><span class="line">    <span class="attr">study</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103153543.png" style="zoom: 80%;">

<br>

<p>例2:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;小红&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">let</span> study = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;小红爱学习&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> stu = &#123;name, age, study&#125;;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103153759.png" style="zoom:80%;">

<br>

<p>例3：<font color="red">(重点)</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小刚&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这种定义对象方法的方式只限于对象内部</li>
</ul>
<img src="/2023/11/01/JS/20231103154051.png" style="zoom:80%;">

<br>



<h4 id="6-2-get-和set-方法"><a href="#6-2-get-和set-方法" class="headerlink" title="6.2 get()和set()方法"></a>6.2 get()和set()方法</h4><p>例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    _name : <span class="literal">null</span>, <span class="comment">// 类似于java中的私有属性</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>() &#123; <span class="comment">// 定义get方法</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了get&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name</span>) &#123; <span class="comment">// 定义set方法</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了set&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 赋值操作会调用set方法</span></span><br><span class="line">stu.<span class="property">name</span>=<span class="string">&quot;小白&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用操作会调用get方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103155028.png" style="zoom: 80%;">

<ul>
<li>JavaScript中是没有私有属性这种概念的，在属性前加 ‘_’ 是一种习惯上的约定</li>
</ul>
<br>



<h4 id="6-3-属性增删"><a href="#6-3-属性增删" class="headerlink" title="6.3 属性增删"></a>6.3 属性增删</h4><p>对比一下 Java 中的 Object</p>
<ul>
<li>Java 的 Object 是以类作为模板来创建，对象不能脱离类模板的范围，一个对象的属性、能用的方法都是确定好的</li>
<li>JS 的对象，不需要什么模板，它的属性和方法可以随时加减</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;;</span><br><span class="line">stu.<span class="property">age</span> = <span class="number">18</span>;					<span class="comment">// 添加属性</span></span><br><span class="line"><span class="keyword">delete</span> stu.<span class="property">age</span>;					<span class="comment">// 删除属性</span></span><br><span class="line"></span><br><span class="line">stu.<span class="property">study</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;		<span class="comment">// 添加方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;在学习&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103155830.png" style="zoom: 80%;">

<br>



<p>添加 get，set，需要借助 Object.definePropery</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">_name</span>:<span class="literal">null</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(stu, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>参数1：目标对象</li>
<li>参数2：属性名</li>
<li>参数3：get，set 的定义</li>
</ul>
<img src="/2023/11/01/JS/20231103160031.png" style="zoom:80%;">

<br>



<h4 id="6-4-this"><a href="#6-4-this" class="headerlink" title="6.4 this"></a>6.4 this</h4><p>先来对 Java 中的 this 有个理解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">(Student <span class="built_in">this</span>, String subject)</span> &#123;</span><br><span class="line">            System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;在学习 &quot;</span> + subject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;小明&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 下面的代码，本质上是执行 study(stu, &quot;java&quot;)，因此 this 就是 stu</span></span><br><span class="line">        stu.study(<span class="string">&quot;java&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Java 中的 this 是个隐式参数</li>
<li>Java 中，我们说 this 代表的就是调用方法的那个对象</li>
</ul>
<br>

<p>js 中的 this 也是隐式参数，但它与函数运行时上下文相关</p>
<p>例如，一个“落单”的函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">study</span>(<span class="params">subject</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;在学习 &quot;</span> + subject)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">study</span>(<span class="string">&quot;js&quot;</span>);  <span class="comment">// 输出 在学习 js</span></span><br></pre></td></tr></table></figure>

<p>这是因为此时函数执行，全局对象 window 被当作了 this，window 对象的 name 属性是空串</p>
<img src="/2023/11/01/JS/20231103164554.png" style="zoom:80%;">

<br>

<p>同样的函数，如果作为对象的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;小白&quot;</span>,</span><br><span class="line">    study</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种情况下，会将当前对象作为 this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stu.<span class="title function_">study</span>(<span class="string">&#x27;js&#x27;</span>); 	<span class="comment">// 输出 小白在学习 js</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103164840.png" style="zoom: 80%;">

<br>

<p>还可以动态改变 this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">name</span>:<span class="string">&quot;小黑&quot;</span>&#125;;</span><br><span class="line">study.<span class="title function_">call</span>(stu, <span class="string">&quot;js&quot;</span>);	<span class="comment">// 输出 小黑在学习 js</span></span><br></pre></td></tr></table></figure>

<p>这回 study 执行时，就把 call 的第一个参数 stu 作为 this</p>
<img src="/2023/11/01/JS/20231103165105.png" style="zoom:80%;">

<br>

<p>一个例外是，在<strong>箭头函数</strong>内出现的 this，以外层 this 理解 </p>
<p>用匿名函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">stu.<span class="title function_">play</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>this.name 所在的函数是【落单】的函数，因此 this 代表 window</li>
</ul>
<p>输出结果为<br><img src="/2023/11/01/JS/20231103172439.png" style="zoom:67%;"></p>
<br>



<p>用箭头函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>this.name 所在的函数是箭头函数，因此 this 要看它外层的 play 函数，play 又是属于 stu 的方法，因此 this 代表 stu 对象</li>
</ul>
<p>输出结果为<br><img src="/2023/11/01/JS/20231103172557.png" style="zoom: 67%;"></p>
<br>



<p>不用箭头函数的做法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> me = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(me.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103172659.png" style="zoom:67%;">

<br>



<h4 id="6-5-原型进程"><a href="#6-5-原型进程" class="headerlink" title="6.5 原型进程"></a>6.5 原型进程</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> father = &#123;</span><br><span class="line">    <span class="attr">f1</span>: <span class="string">&#x27;父属性&#x27;</span>,</span><br><span class="line">    <span class="attr">m1</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;父方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> son = <span class="title class_">Object</span>.<span class="title function_">create</span>(father);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">f1</span>);  <span class="comment">// 打印 父属性</span></span><br><span class="line">son.<span class="title function_">m1</span>();			  <span class="comment">// 打印 父方法</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103200011.png" style="zoom:80%;">

<ul>
<li>father 是父对象，son 去调用 .m1 或 .f1 时，自身对象没有，就到父对象找</li>
<li>son 自己可以添加自己的属性和方法</li>
<li>son 里有特殊属性 <code>__proto__</code> 代表它的父对象，js 术语： son 的原型对象</li>
<li>不同浏览器对打印 son 的 <code>__proto__</code> 属性时显示不同<ul>
<li>Edge 打印 console.dir(son) 显示 <code>[[Prototype]]</code></li>
<li>Firefox 打印 console.dir(son) 显示 <code>&lt;prototype&gt;</code></li>
</ul>
</li>
</ul>
<br>

<p><strong>基于函数的原型继承</strong></p>
<p>出于方便的原因，js 又提供了一种基于函数的原型继承</p>
<blockquote>
<p><strong>函数职责</strong></p>
<ol>
<li><p>负责创建子对象，给子对象提供属性、方法，功能上相当于构造方法</p>
</li>
<li><p>函数有个特殊的属性 prototype，它就是函数创建的子对象的父对象</p>
<p><strong>注意！</strong>名字有差异，这个属性的作用就是为新对象提供原型</p>
</li>
</ol>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cons</span>(<span class="params">f2</span>) &#123;</span><br><span class="line">    <span class="comment">// 创建子对象(this), 给子对象提供属性和方法</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">f2</span> = f2;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">m2</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;子方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// cons.prototype 就是父对象</span></span><br><span class="line">cons.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">f1</span> = <span class="string">&quot;父属性&quot;</span>;</span><br><span class="line">cons.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">m1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;父方法&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配合 new 关键字，创建子对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> <span class="title function_">cons</span>(<span class="string">&quot;子属性&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>子对象的 <code>__proto__</code> 就是函数的 <code>prototype</code> 属性</p>
<img src="/2023/11/01/JS/20231103200447.png" style="zoom:80%;">

<br>



<hr>
<h3 id="7-JSON"><a href="#7-JSON" class="headerlink" title="7. JSON"></a>7. JSON</h3><p>一个 json 对象可以长这样：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">18</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>一个 js 对象长这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JSON和JS的区别</p>
<ol>
<li>本质不同<ul>
<li>json 对象本质上是个字符串，它的职责是作为客户端和服务器之间传递数据的一种格式，它的属性只是样子货</li>
<li>js 对象是切切实实的对象，可以有属性方法</li>
</ul>
</li>
<li>语法细节不同<ul>
<li>json 中只能有 null、true|false、数字、字符串（只有双引号）、对象、数组</li>
<li>json 中不能有除以上的其它 js 对象的特性，如方法等</li>
<li>json 中的属性必须用双引号引起来</li>
</ul>
</li>
</ol>
<p>json 字符串与 js 对象的转换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">parse</span>(json字符串);  <span class="comment">// 返回js对象</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(js对象);  <span class="comment">// 返回json字符串</span></span><br></pre></td></tr></table></figure>

<br>



<hr>
<h3 id="8-运算符与表达式"><a href="#8-运算符与表达式" class="headerlink" title="8. 运算符与表达式"></a>8. 运算符与表达式</h3><ul>
<li><code>+ - * / % ** </code></li>
<li><code>+= -= *= /= %= **=</code></li>
<li><code>++ --</code></li>
<li>位运算、移位运算</li>
<li><code>== != &gt; &gt;= &lt; &lt;=</code></li>
<li><code>=== !==</code> </li>
<li><code>&amp;&amp; || !</code> </li>
<li><code>?? ?.</code> </li>
<li><code>...</code> </li>
<li>解构赋值</li>
</ul>
<br>



<h4 id="8-1"><a href="#8-1" class="headerlink" title="8.1  &#x3D;&#x3D;&#x3D;"></a>8.1  &#x3D;&#x3D;&#x3D;</h4><p>严格相等运算符，用作逻辑判等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="number">1</span>    	<span class="comment">// 返回 true </span></span><br><span class="line"><span class="number">1</span> == <span class="string">&#x27;1&#x27;</span>	<span class="comment">// 返回 true，会先将右侧的字符串转为数字，再做比较</span></span><br><span class="line"><span class="number">1</span> === <span class="string">&#x27;1&#x27;</span>	<span class="comment">// 返回 false，类型不等，直接返回 false</span></span><br></pre></td></tr></table></figure>

<p>typeof 查看某个值的类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span>	<span class="comment">// 返回 &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;1&#x27;</span>	<span class="comment">// 返回 &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103204917.png" style="zoom:80%;">

<br>



<h4 id="8-2"><a href="#8-2" class="headerlink" title="8.2 ||"></a>8.2 ||</h4><p>需求：如果参数 n 没有传递，给它一个【男】</p>
<p><strong>推荐</strong>做法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n = <span class="string">&#x27;男&#x27;</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一些老旧代码中可能的做法（不推荐）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    n = n || <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>它的语法是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">值<span class="number">1</span> || 值<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>如果值1 是 Truthy，返回值1，如果值1 是 Falsy 返回值 2</p>
<img src="/2023/11/01/JS/20231103205241.png" style="zoom:80%;">

<br>



<h4 id="8-3-与"><a href="#8-3-与" class="headerlink" title="8.3 ??与?."></a>8.3 ??与?.</h4><p><strong>??</strong> </p>
<p>需求：如果参数n没有传递<font color="red">或者是nul</font>l，给他一个[男]</p>
<p>传统办法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(n === <span class="literal">undefined</span> || n === <span class="literal">null</span>) &#123;</span><br><span class="line">        n = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用??</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">	n = n ?? <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103205850.png" style="zoom:80%;">

<br>



<p><strong>?.</strong></p>
<p>需求：函数参数是一个对象，可能包含子属性</p>
<p>例如，参数可能是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">        <span class="attr">city</span>: <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu2 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;李四&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu3 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在要访问子属性（有问题）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在希望当某个属性是 nullish 时，短路并返回 undefined，可以用 ?.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>?.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用传统办法 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(stu.<span class="property">address</span> === <span class="literal">undefined</span> || stu.<span class="property">address</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103210444.png" style="zoom:80%;">

<br>



<h4 id="8-4-…"><a href="#8-4-…" class="headerlink" title="8.4 …"></a>8.4 …</h4><p>展开运算符</p>
<p>作用1：打散数组，把元素传递给多个参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">a,b,c</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需求，把数组元素依次传递给函数参数</p>
<p>传统写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>(arr[<span class="number">0</span>],arr[<span class="number">1</span>],arr[<span class="number">2</span>]);		<span class="comment">// 输出 1,2,3</span></span><br></pre></td></tr></table></figure>

<p>展开运算符写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>(...arr);					<span class="comment">// 输出 1,2,3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打散可以理解为【去掉了】数组外侧的中括号，只剩下数组元素</li>
</ul>
<img src="/2023/11/01/JS/20231103210859.png" style="zoom:80%;">

<br>

<p>作用2：复制数组或对象</p>
<p>数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [...arr1];		<span class="comment">// 复制数组</span></span><br></pre></td></tr></table></figure>

<p>对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;...obj1&#125;;		<span class="comment">// 复制对象</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103215340.png" style="zoom:67%;">

<p><strong>注意</strong>：展开运算符复制属于浅拷贝，更深一层的数据采用了引用的形式，例如这里的city就是引用了原来的地址</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">address</span>: &#123;<span class="attr">city</span>: <span class="string">&#x27;北京&#x27;</span>&#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o2 = &#123;...o1&#125;;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103215511.png" style="zoom:80%;">

<br>

<p>作用3：合并数组或对象</p>
<p>合并数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = [<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> a2 = [<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b1 = [...a1,...a2];		<span class="comment">// 结果 [1,2,3,4]</span></span><br><span class="line"><span class="keyword">let</span> b2 = [...a2,<span class="number">5</span>,...a1]	<span class="comment">// 结果 [3,4,5,1,2]</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103215720.png" style="zoom:80%;">

<p>合并对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;<span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> o3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n1 = &#123;...o1, ...o2&#125;;	<span class="comment">// 结果 &#123;name:&#x27;张三&#x27;,age:18&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n2 = &#123;...o1, ...o2, ...o3&#125;; <span class="comment">// 结果&#123;name:&#x27;李四&#x27;,age:18&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>复制对象时出现同名属性，后面的会覆盖前面的</li>
</ul>
<img src="/2023/11/01/JS/20231103220144.png" style="zoom:80%;">

<br>



<h4 id="8-5"><a href="#8-5" class="headerlink" title="8.5 []{}"></a>8.5 []{}</h4><p>解构赋值</p>
<p><strong>[]</strong></p>
<p>用在声明变量时</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = arr;	<span class="comment">// 结果 a=1, b=2, c=3</span></span><br></pre></td></tr></table></figure>

<p>用在声明参数时</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">[a,b,c]</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) 	<span class="comment">// 结果 a=1, b=2, c=3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(arr);				</span><br></pre></td></tr></table></figure>

<br>



<p><strong>{}</strong></p>
<p>用在声明变量时</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name,age&#125; = obj;	<span class="comment">// 结果 name=张三, age=18</span></span><br></pre></td></tr></table></figure>

<p>用在声明参数时</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">&#123;name, age&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age); <span class="comment">// 结果 name=张三, age=18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(obj)</span><br></pre></td></tr></table></figure>

<br>



<hr>
<h3 id="9-控制语句"><a href="#9-控制语句" class="headerlink" title="9. 控制语句"></a>9. 控制语句</h3><ul>
<li><code>if ... else</code></li>
<li><code>switch</code></li>
<li><code>while</code></li>
<li><code>do ... while</code></li>
<li><code>for</code> </li>
<li><code>for ... in</code> </li>
<li><code>for ... of</code> </li>
<li><code>try ... catch</code></li>
</ul>
<br>



<h4 id="9-1-for-in"><a href="#9-1-for-in" class="headerlink" title="9.1 for in"></a>9.1 for in</h4><p>主要用来遍历对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> father = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">study</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> father) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>其中 const n 代表遍历出来的属性名</p>
</li>
<li><p>注意1：方法名也能被遍历出来（它其实也算一种特殊属性）</p>
<img src="/2023/11/01/JS/20231103221046.png" style="zoom: 80%;">
</li>
<li><p>注意2：遍历子对象时，父对象的属性会跟着遍历出来</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> son = <span class="title class_">Object</span>.<span class="title function_">create</span>(father);</span><br><span class="line">son.<span class="property">sex</span> = <span class="string">&quot;男&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> son) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103221337.png" style="zoom:80%;">
</li>
<li><p>注意3：在 for in 内获取属性值，要使用 [] 语法，而不能用 . 语法</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> son) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n, son[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103221558.png" style="zoom:80%;">

<br>



<h4 id="9-2-for-of"><a href="#9-2-for-of" class="headerlink" title="9.2 for of"></a>9.2 for of</h4><p>主要用来遍历数组，也可以是Map、Set等可迭代对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> i <span class="keyword">of</span> a1) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a2 = [</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>:<span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>:<span class="number">22</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> obj <span class="keyword">of</span> a2) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>, obj.<span class="property">age</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> &#123;name,age&#125; <span class="keyword">of</span> a2) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103221953.png" style="zoom:80%;">

<br>



<h4 id="9-3-try-catch"><a href="#9-3-try-catch" class="headerlink" title="9.3 try catch"></a>9.3 try catch</h4><p>对有可能出现异常的代码进行try catch处理，finally中放的代码一定会被执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">address</span>: &#123;<span class="attr">city</span>:<span class="string">&#x27;北京&#x27;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> stu2 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)   </span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;出现了异常&#x27;</span>, e.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;finally&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/01/JS/20231103222212.png" style="zoom:80%;">

<br>



<hr>
<h3 id="10-node的安装"><a href="#10-node的安装" class="headerlink" title="10.node的安装"></a>10.node的安装</h3><p><strong>安装 nvm</strong></p>
<p>nvm 即 (node version manager)，好处是方便切换 node.js 版本</p>
<p>安装注意事项</p>
<ol>
<li>要卸载掉现有的 nodejs</li>
<li>提示选择 nvm 和 nodejs 目录时，一定要避免目录中出现空格</li>
<li>选用【以管理员身份运行】cmd 程序来执行 nvm 命令</li>
<li>首次运行前设置好国内镜像地址</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm node_mirror http://npm.taobao.org/mirrors/node/</span><br><span class="line">nvm npm_mirror https://npm.taobao.org/mirrors/npm/</span><br></pre></td></tr></table></figure>

<p>首先查看有哪些可用版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm list available</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">|   CURRENT    |     LTS      |  OLD STABLE  | OLD UNSTABLE |</span><br><span class="line">|--------------|--------------|--------------|--------------|</span><br><span class="line">|    21.1.0    |    20.9.0    |   0.12.18    |   0.11.16    |</span><br><span class="line">|    21.0.0    |   18.18.2    |   0.12.17    |   0.11.15    |</span><br><span class="line">|    20.8.1    |   18.18.1    |   0.12.16    |   0.11.14    |</span><br><span class="line">|    20.8.0    |   18.18.0    |   0.12.15    |   0.11.13    |</span><br><span class="line">|    20.7.0    |   18.17.1    |   0.12.14    |   0.11.12    |</span><br><span class="line">|    20.6.1    |   18.17.0    |   0.12.13    |   0.11.11    |</span><br><span class="line">|    20.6.0    |   18.16.1    |   0.12.12    |   0.11.10    |</span><br><span class="line">|    20.5.1    |   18.16.0    |   0.12.11    |    0.11.9    |</span><br><span class="line">|    20.5.0    |   18.15.0    |   0.12.10    |    0.11.8    |</span><br><span class="line">|    20.4.0    |   18.14.2    |    0.12.9    |    0.11.7    |</span><br><span class="line">|    20.3.1    |   18.14.1    |    0.12.8    |    0.11.6    |</span><br><span class="line">|    20.3.0    |   18.14.0    |    0.12.7    |    0.11.5    |</span><br><span class="line">|    20.2.0    |   18.13.0    |    0.12.6    |    0.11.4    |</span><br><span class="line">|    20.1.0    |   18.12.1    |    0.12.5    |    0.11.3    |</span><br><span class="line">|    20.0.0    |   18.12.0    |    0.12.4    |    0.11.2    |</span><br><span class="line">|    19.9.0    |   16.20.2    |    0.12.3    |    0.11.1    |</span><br><span class="line">|    19.8.1    |   16.20.1    |    0.12.2    |    0.11.0    |</span><br><span class="line">|    19.8.0    |   16.20.0    |    0.12.1    |    0.9.12    |</span><br><span class="line">|    19.7.0    |   16.19.1    |    0.12.0    |    0.9.11    |</span><br><span class="line">|    19.6.1    |   16.19.0    |   0.10.48    |    0.9.10    |</span><br></pre></td></tr></table></figure>

<p>建议安装 LTS（长期支持版）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install 18.17.0</span><br></pre></td></tr></table></figure>

<p>执行 nvm list 会列出已安装版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm list</span><br></pre></td></tr></table></figure>



<p>切换到 16.16.0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 18.17.0</span><br></pre></td></tr></table></figure>

<p>安装后 nvm 自己的环境变量会自动添加，但可能需要手工添加 nodejs 的 PATH 环境变量</p>
<br>

<p><strong>检查 npm</strong></p>
<p>npm 是 js 的包管理器，就类似于 java 界的 maven，要确保它使用的是国内镜像</p>
<p>检查镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm get registry</span><br></pre></td></tr></table></figure>

<p>如果返回的不是 <code>https://registry.npm.taobao.org/</code>，需要做如下设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure>

<br>

<p><strong>搭建前端服务器</strong></p>
<p>新建一个保存项目的 client 文件夹，进入文件夹执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express --save-dev</span><br></pre></td></tr></table></figure>

<p>执行上面指令后会生成下面三个文件<br><img src="/2023/11/01/JS/20231104142223.png" style="zoom:67%;"></p>
<p>修改 package.json 文件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;express&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.18.1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>其中 devDependencies 是 npm install –save-dev 添加的</li>
</ul>
<p>编写 main.js 代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&#x27;express&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;./&#x27;</span>))</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">7070</span>)</span><br></pre></td></tr></table></figure>

<p>执行 js 代码（运行前端服务器）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node main.js</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/11/01/JS/" data-id="clywa1f42000becve4ygy6ich" data-title="JavaScript" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Stream流" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/Stream%E6%B5%81/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T06:35:56.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/Stream%E6%B5%81/">Stream流</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>该笔记基于b站视频完成<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1te411w722?vd_source=db8e7458ec195ac74979ce5478cbc624">Java-Stream流从入门到精通</a></p>
<p><strong>什么是Stream流</strong></p>
<p>Java 8 API添加了一个新的抽象称为流Stream，可以让你以一种声明的方式处理数据<br>Stream 使用一种类似用 SQL 语句从数据库查询数据的直观方式来提供一种对 Java 集合运算和表达的高阶抽象<br>Stream API可以极大提高Java程序员的生产力，让程序员写出高效率、干净、简洁的代码<br>这种风格将要处理的元素集合看作一种流， 流在管道中传输， 并且可以在管道的节点上进行处理， 比如筛选， 排序，聚合等<br>元素流在管道中经过中间操作（intermediate operation）的处理，最后由最终操作(terminal operation)得到前面处理的结果<br></p>
<br>

<p><strong>Stream流的作用</strong>：结合了Lambda表达式，简化了集合、数组的操作</p>
<p><strong>Stream流的使用步骤</strong></p>
<ol>
<li>先得到一条Stream流，并把数据放上去</li>
<li>利用Stream流中的API进行各种操作<ul>
<li>中间方法：过滤、转换	方法调用完毕之后、还可以调用其他方法</li>
<li>终结方法：统计、打印    最后一步，调用完毕之后，不能再调用其他方法</li>
</ul>
</li>
</ol>
<br>

<p><strong>把数据放到Stream流上去</strong></p>
<table>
<thead>
<tr>
<th align="center">获取方式</th>
<th align="center">方法名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">单例集合</td>
<td align="center">default Stream<E> stream()</E></td>
<td align="left">Collection中的默认方法</td>
</tr>
<tr>
<td align="center">双列集合</td>
<td align="center">无</td>
<td align="left">无法直接使用Stream流</td>
</tr>
<tr>
<td align="center">数组</td>
<td align="center">public static<T> Stream<T> stream (T… values)</T></T></td>
<td align="left">Arrays工具类中的静态方法</td>
</tr>
<tr>
<td align="center">一堆零散的数据</td>
<td align="center">public static<T> Stream<T> of (T… values)</T></T></td>
<td align="left">Stream接口中你的静态方法</td>
</tr>
</tbody></table>
<br>

<p>单例集合获取Stream流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用Stream流遍历集合中的元素</span></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;d&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.stream().forEach(s -&gt; System.out.println(s));</span><br></pre></td></tr></table></figure>

<br>

<p>双列集合获取Stream流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建双列集合</span></span><br><span class="line">HashMap&lt;String, Integer&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// 添加数据</span></span><br><span class="line">hm.put(<span class="string">&quot;a&quot;</span>,<span class="number">1</span>);</span><br><span class="line">hm.put(<span class="string">&quot;b&quot;</span>,<span class="number">2</span>);</span><br><span class="line">hm.put(<span class="string">&quot;c&quot;</span>,<span class="number">3</span>);</span><br><span class="line">hm.put(<span class="string">&quot;d&quot;</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一中获取Stream流方法</span></span><br><span class="line">hm.keySet().stream().forEach(s -&gt; System.out.println(s));</span><br><span class="line">hm.values().stream().forEach(x -&gt; System.out.println(x));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种</span></span><br><span class="line">hm.entrySet().stream().forEach(y -&gt; System.out.println(y));</span><br></pre></td></tr></table></figure>

<br>

<p>数组获取Stream流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">Arrays.stream(arr).forEach(s -&gt; System.out.println(s));</span><br></pre></td></tr></table></figure>

<br>

<p>一堆零散数据获取Stream流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 前提是这些数据的数据类型相同</span></span><br><span class="line">Stream(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)..forEach(s -&gt; System.out.println(s));</span><br><span class="line">Stream(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>)..forEach(s -&gt; System.out.println(s));</span><br></pre></td></tr></table></figure>



<br>



<p><strong>Stream流的中间方法</strong></p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Stream<T>  <font color="red">filter</font>(Predicate&lt;? super T&gt; predicate)</T></td>
<td align="left">过滤</td>
</tr>
<tr>
<td align="left">Stream<T>  <font color="red">limit</font>(long maxSize)</T></td>
<td align="left">获取前面几个元素</td>
</tr>
<tr>
<td align="left">Stream<T>  <font color="red">skip</font>(long n)</T></td>
<td align="left">跳过前面几个元素</td>
</tr>
<tr>
<td align="left">Stream<T>  <font color="red">distinct</font>()</T></td>
<td align="left">元素去重，依赖于hashCode和equals方法</td>
</tr>
<tr>
<td align="left">static <T> Stream<T> <font color="red">concat</font>(Stream a, Stream b)</T></T></td>
<td align="left">合并a和b两个流为一个流</td>
</tr>
<tr>
<td align="left">Stream<R>  <font color="red">map</font>(Function&lt;T, R&gt; mapper)</R></td>
<td align="left">转换流中的数据类型</td>
</tr>
</tbody></table>
<p><strong>注意：</strong></p>
<ul>
<li>中间方法，返回新的Stream流，原来的Stream流只能使用一次，建议使用链式编程</li>
<li>修改Stream流中的数据，不会影响原来集合或者数据中的数据</li>
</ul>
<br>

<p>filter、limit、skip</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list, <span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;周芷若&quot;</span>, <span class="string">&quot;赵敏&quot;</span>, <span class="string">&quot;张强&quot;</span>, <span class="string">&quot;张三丰&quot;</span>, <span class="string">&quot;张翠山&quot;</span>, <span class="string">&quot;张良&quot;</span>, <span class="string">&quot;王二麻子&quot;</span>, <span class="string">&quot;谢广坤&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// filter 过滤  把张开头的留下，其余的数据过滤</span></span><br><span class="line">list.stream().filter(s -&gt; s.startsWith(<span class="string">&quot;张&quot;</span>)).forEach(s -&gt; System.out.println(s));</span><br><span class="line"></span><br><span class="line"><span class="comment">// limit: 获取前面几个元素	skip: 跳过前面几个元素</span></span><br><span class="line"><span class="comment">// 获取	&quot;张强&quot;, &quot;张三丰&quot;, &quot;张翠山&quot;</span></span><br><span class="line"><span class="comment">// 实现方法一：先获取前面6个元素，再跳过前面3个元素</span></span><br><span class="line">list.stream().limit(<span class="number">6</span>).skip(<span class="number">3</span>).forEach(s -&gt; System.out.println(s));</span><br><span class="line"><span class="comment">// 实现方法二：先跳过前面3个，在获取前面3个</span></span><br><span class="line">list.stream().skip(<span class="number">3</span>).limit(<span class="number">3</span>).forEach(s -&gt; System.out.println(s));</span><br></pre></td></tr></table></figure>

<br>

<p>distinct、concat</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// distinct : 元素去重	concat : 合并两个流</span></span><br><span class="line">ArrayList&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list1, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去重输出</span></span><br><span class="line">list1.stream().distinct().forEach(s -&gt; System.out.println(s));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并两个流</span></span><br><span class="line">ArrayList&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list1, <span class="string">&quot;g&quot;</span>, <span class="string">&quot;h&quot;</span>);</span><br><span class="line">Stream.concat(list1.stream(), list2.stream());</span><br></pre></td></tr></table></figure>

<br>

<p>map</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// map 转换流中的数据类型</span></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list, <span class="string">&quot;张无忌-15&quot;</span>, <span class="string">&quot;周芷若-18&quot;</span>, <span class="string">&quot;赵敏-17&quot;</span>, <span class="string">&quot;张强-31&quot;</span>, <span class="string">&quot;张三丰-23&quot;</span>, <span class="string">&quot;张翠山-15&quot;</span>, <span class="string">&quot;张良-20&quot;</span>, <span class="string">&quot;王二麻子-25&quot;</span>, <span class="string">&quot;谢广坤-40&quot;</span>);</span><br><span class="line"><span class="comment">// 需求：只获取里面的年龄并进行打印</span></span><br><span class="line">list.stream()</span><br><span class="line">    .map(s -&gt; Integer.parseInt(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">    .forEach(s -&gt; System.out.println(s));</span><br></pre></td></tr></table></figure>

<br>



<p><strong>Stream流的终结方法</strong></p>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">void forEach(Consumer action)</td>
<td align="center">遍历</td>
</tr>
<tr>
<td align="center">long count()</td>
<td align="center">统计</td>
</tr>
<tr>
<td align="center">toArray()</td>
<td align="center">收集流中的数据，放到数组中</td>
</tr>
<tr>
<td align="center">collect(Collector collector)</td>
<td align="center">收集流中的数据，放到集合中</td>
</tr>
</tbody></table>
<br>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list, <span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;周芷若&quot;</span>, <span class="string">&quot;赵敏&quot;</span>, <span class="string">&quot;张强&quot;</span>, <span class="string">&quot;张三丰&quot;</span>, <span class="string">&quot;张翠山&quot;</span>, <span class="string">&quot;张良&quot;</span>, <span class="string">&quot;王二麻子&quot;</span>, <span class="string">&quot;谢广坤&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用forEach遍历集合</span></span><br><span class="line">list.stream().forEach(a -&gt; System.out.println(s));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用count统计个数</span></span><br><span class="line"><span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> list.stream().filter(s -&gt; s.startsWith(<span class="string">&quot;张&quot;</span>)).count();</span><br><span class="line">System.out.println(count);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 收集流流中的数据，放到数组中 toArray</span></span><br><span class="line">Object[] arr1 = list.stream().toArray();</span><br><span class="line"><span class="comment">// 指定数组数据类型</span></span><br><span class="line">String[] arr2 = list.stream().toArray(value -&gt; <span class="keyword">new</span> <span class="title class_">String</span>[value]);</span><br></pre></td></tr></table></figure>

<br>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list, <span class="string">&quot;张无忌-男-15&quot;</span>, <span class="string">&quot;周芷若-女-18&quot;</span>, <span class="string">&quot;赵敏-女--17&quot;</span>, <span class="string">&quot;张强-男-31&quot;</span>, <span class="string">&quot;张三丰-男-23&quot;</span>, <span class="string">&quot;张翠山-女-15&quot;</span>, <span class="string">&quot;张良-男-20&quot;</span>, <span class="string">&quot;王二麻子-男-25&quot;</span>, <span class="string">&quot;谢广坤-男-40&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把所有的男性收集起来,收集到List集合中</span></span><br><span class="line">List&lt;String&gt; newList = list.stream()</span><br><span class="line">    .filter(s -&gt; <span class="string">&quot;男&quot;</span>.equals(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">    .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把所有的男性收集起来,收集到Set集合中</span></span><br><span class="line">List&lt;String&gt; newSet = list.stream()</span><br><span class="line">    .filter(s -&gt; <span class="string">&quot;男&quot;</span>.equals(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">    .collect(Collectors.toSet());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 区别：Set集合会去重</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把所有的男性收集起来,收集到Map集合中,键：姓名，值：年龄</span></span><br><span class="line">Map&lt;String, Integer&gt; newMap = list.stream()</span><br><span class="line">    .filter(s -&gt; <span class="string">&quot;男&quot;</span>.equals(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">    .collect(Collectors.toMap(</span><br><span class="line">    	s -&gt; s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">0</span>],</span><br><span class="line">        s -&gt; Integer.parseInt(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">3</span>])</span><br><span class="line">	));</span><br><span class="line"><span class="comment">// toMap()中，第一个参数是键，第二个参数是值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<p><strong>总结</strong></p>
<ol>
<li><p>Stream流的作用</p>
<p>结合了Lambda表达式，简化集合、数组的操作</p>
</li>
<li><p>Stream流的使用步骤</p>
<ul>
<li>获取Stream流对象</li>
<li>使用中间方法处理数据</li>
<li>使用终结方法处理数据</li>
</ul>
</li>
<li><p>如何获取Stream流对象</p>
<ul>
<li>单列集合：Collection中的默认方法Stream</li>
<li>双列集合：不能直接获取，要转为单列集合</li>
<li>数组：Arrays工具类中的静态方法Stream</li>
<li>零散的数据：Stream接口中的静态方法of</li>
</ul>
</li>
<li><p>常见方法</p>
<ul>
<li>中间方法：filter、limit、skip、distinct、concat、map</li>
<li>终结方法：forEach、count、collect</li>
</ul>
</li>
</ol>
<br>



<p><strong>练习题</strong></p>
<p>定义一个集合，并添加一些整数1,2,3,4,5,6,7,8,9,10<br>过滤奇数，只留下偶数<br>并将结果存下来</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>);</span><br><span class="line">List&lt;Integer&gt; collect = list.stream()</span><br><span class="line">        .filter(s -&gt; s % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">System.out.println(collect);</span><br></pre></td></tr></table></figure>

<br>



<p>创建一个ArrayList集合，并添加一下字符串，字符串中前面是姓名，后面是年龄<br>“张三，23”<br>“李四，24”<br>“王五，25”<br>保留年龄大于等于24岁的人，并将结果收集到Map集合中，姓名为键，年龄为值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(list,<span class="string">&quot;张三，23&quot;</span>,<span class="string">&quot;李四，24&quot;</span>,<span class="string">&quot;王五，25&quot;</span>);</span><br><span class="line">Map&lt;String, Integer&gt; map = list.stream()</span><br><span class="line">        .filter(s -&gt; Integer.parseInt((s.split(<span class="string">&quot;，&quot;</span>)[<span class="number">1</span>])) &gt;= <span class="number">24</span>)</span><br><span class="line">        .collect(Collectors.toMap(</span><br><span class="line">                        s -&gt; (s.split(<span class="string">&quot;，&quot;</span>)[<span class="number">0</span>]),</span><br><span class="line">                        s -&gt; Integer.parseInt(s.split(<span class="string">&quot;，&quot;</span>)[<span class="number">1</span>])));</span><br><span class="line">System.out.println(map);</span><br></pre></td></tr></table></figure>

<br>



<p>现在有两个ArrayList集合，<br>第一个集合中：存储6名男演员的名字和年龄，第二个集合中：存储6名女演员的名字和年龄<br>姓名和年龄中间用逗号隔开。如：”张三，23”<br>要求完成如下的操作：</p>
<ol>
<li>男演员只要名字为3个字的前两人</li>
<li>女演员只要姓杨的，并且不要第一个</li>
<li>把过滤后的男演员姓名和女演员姓名合并到一起</li>
<li>将上一步的演员信息封装成Actor对象</li>
<li>将所有的演员对象都保存到List集合中</li>
</ol>
<p>演员类属性: name, age</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; manList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(manList,<span class="string">&quot;蔡坤坤，24&quot;</span>,<span class="string">&quot;叶齁咸，23&quot;</span>,<span class="string">&quot;刘不甜，22&quot;</span>,<span class="string">&quot;吴签，24&quot;</span>,<span class="string">&quot;谷嘉，30&quot;</span>,<span class="string">&quot;肖凉凉，27&quot;</span>);</span><br><span class="line">ArrayList&lt;String&gt; womenList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Collections.addAll(womenList,<span class="string">&quot;赵小颖，35&quot;</span>,<span class="string">&quot;杨颖，36&quot;</span>,<span class="string">&quot;高圆圆，43&quot;</span>,<span class="string">&quot;张天天，31&quot;</span>,<span class="string">&quot;刘诗，35&quot;</span>,<span class="string">&quot;杨小幂，33&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 男演员只要名字为3个字的前两人</span></span><br><span class="line">Stream&lt;String&gt; menStream = manList.stream().filter(s -&gt; s.split(<span class="string">&quot;，&quot;</span>)[<span class="number">0</span>].length() == <span class="number">3</span>).limit(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// 女演员只要姓杨的，并且不要第一个</span></span><br><span class="line">Stream&lt;String&gt; womenStream = womenList.stream().filter(s -&gt; s.split(<span class="string">&quot;，&quot;</span>)[<span class="number">0</span>].startsWith(<span class="string">&quot;杨&quot;</span>)).skip(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把过滤后的男演员和女演员合并到一起</span></span><br><span class="line">List&lt;Actor&gt; actorList = Stream.concat(menStream, womenStream)</span><br><span class="line">        .map(s -&gt; <span class="keyword">new</span> <span class="title class_">Actor</span>(s.split(<span class="string">&quot;，&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">                , Integer.parseInt(s.split(<span class="string">&quot;，&quot;</span>)[<span class="number">1</span>])))</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">System.out.println(actorList);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Actor类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Actor</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Actor</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Actor</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Actor&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/10/24/Stream%E6%B5%81/" data-id="clywa1f4n0025ecve228l0285" data-title="Stream流" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-不可变集合" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/22/%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88/" class="article-date">
  <time class="dt-published" datetime="2023-10-22T08:16:40.000Z" itemprop="datePublished">2023-10-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/22/%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88/">不可变集合</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>该笔记基于b站视频完成<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1te411w722?vd_source=db8e7458ec195ac74979ce5478cbc624">Java-Stream流从入门到精通</a></p>
<p><strong>什么是不可变集合？</strong></p>
<img src="/2023/10/22/%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88/20231022161920.png" style="zoom:67%;">

<p><strong>不可变集合就是不能修改的集合</strong></p>
<p>应用场景:</p>
<ul>
<li>如果某个数据不能被修改，把它防御性的拷贝到不可变集合中是一个很好的实践</li>
<li>当集合对象被不可信的库调用的时候，不可变形式是安全的</li>
</ul>
<p>简单理解就是不想让别人修改集合中的内容<br>例如扑克牌，集合中存储扑克牌的种类和数量是不可变的</p>
<p><img src="/2023/10/22/%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88/20231022162002.png"></p>
<br>

<p><strong>创建不可变集合的书写格式</strong></p>
<table>
<thead>
<tr>
<th align="center">方法名称</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">static <E> List<E> of (E…elements)</E></E></td>
<td align="center">创建一个具有指定元素的List集合对象</td>
</tr>
<tr>
<td align="center">static <E> Set<E> of (E…elements)</E></E></td>
<td align="center">创建一个具有指定元素的Set集合对象</td>
</tr>
<tr>
<td align="center">static &lt;E,V&gt; Map&lt;E,V&gt; of (E…elements)</td>
<td align="center">创建一个具有指定元素的Map集合对象</td>
</tr>
</tbody></table>
<p>创建不可变List集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一旦创建完成之后，是无法进行修改的，在下面的代码中，只能进行查询操作</span></span><br><span class="line">List&lt;String&gt; list = List.of(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;王五&quot;</span>,<span class="string">&quot;赵六&quot;</span>); <span class="comment">// 该方法在jdk1.9及以后才有</span></span><br></pre></td></tr></table></figure>

<br>

<p>创建不可变Set集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一旦创建完成之后，是无法进行修改的，在下面的代码中，只能进行查询操作</span></span><br><span class="line"><span class="comment">// Map中的元素不能重复</span></span><br><span class="line">Set&lt;String&gt; set = Set.of(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;王五&quot;</span>,<span class="string">&quot;赵六&quot;</span>); <span class="comment">// 该方法在jdk1.9及以后才有</span></span><br></pre></td></tr></table></figure>

<br>

<p>创建不可变Map集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一旦创建完成之后，是无法进行修改的，在下面的代码中，只能进行查询操作</span></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">Map中的键位不能重复</span></span><br><span class="line"><span class="comment">Map里面的of方法，参数是有上限的，最多只能传递20个参数，也就是10对键值对，因为形参列表中只能有一个可变参数</span></span><br><span class="line"><span class="comment">如果我们要创建多个键值对对象，数量大于10个，在Map接口中还有一个方法ofEntries，把键和值看做一个整体来作为可变形参</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Map.of(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;上海&quot;</span>); <span class="comment">// 张三是key，北京是value；李四是key，上海是value</span></span><br></pre></td></tr></table></figure>

<br>

<p>Map的ofEntries</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建Map的不可变集合，键值对数量超过10</span></span><br><span class="line"><span class="comment">// 1.创建一个普通的Map集合</span></span><br><span class="line">HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;a&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;b&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;3&quot;</span>,<span class="string">&quot;c&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;4&quot;</span>,<span class="string">&quot;d&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;5&quot;</span>,<span class="string">&quot;e&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;6&quot;</span>,<span class="string">&quot;f&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;7&quot;</span>,<span class="string">&quot;g&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;8&quot;</span>,<span class="string">&quot;h&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;9&quot;</span>,<span class="string">&quot;i&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;10&quot;</span>,<span class="string">&quot;j&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;11&quot;</span>,<span class="string">&quot;k&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.利用上面的数据来获取一个不可变集合</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">方法一</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">// 获取到所有的键值对对象(Entry对象)</span></span><br><span class="line"><span class="comment">Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = map.entrySet();</span></span><br><span class="line"><span class="comment">// 把entries变成一个数组</span></span><br><span class="line"><span class="comment">Map.Entry[] arr1 = new Map.Entry(0);</span></span><br><span class="line"><span class="comment">// toArray方法在底层会比较集合的长度和数组长度两者的大小</span></span><br><span class="line"><span class="comment">// 如果集合的长度 &gt; 数组的长度 : 数据在集合中放不下，此时会根据实际数据个数，查询创建数组</span></span><br><span class="line"><span class="comment">Map.Entry[] arr2 = entries.toArray(arr1);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// 不可变的Map集合</span></span><br><span class="line"><span class="comment">Map map = Map.ofEntries(arr2);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法二</span></span><br><span class="line"><span class="comment">//Map&lt;Object, Object&gt; map = Map.ofEntries(map.entrySet().toArray(new Map.Entry[0]));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法上：jdk 10 才开始有</span></span><br><span class="line">Map&lt;String, String&gt; map = Map.copyOf(map);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<p><strong>总结</strong></p>
<ol>
<li><p>不可变集合的特点</p>
<p>定义完成后不可以修改，或者添加、删除</p>
</li>
<li><p>创建不可变集合</p>
<p>List、Set、Map接口中，都存在of方法可以创建不可变集合</p>
</li>
<li><p>三种方式的细节</p>
<ul>
<li>List：直接用</li>
<li>Set：元素不能重复</li>
<li>Map：元素不能重复，键值对数量最多是10个，超过10个用ofEntries方法</li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/10/22/%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88/" data-id="clywa1f4l0020ecvec2iifsjm" data-title="不可变集合" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-公共字段自动填充" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/21/%E5%85%AC%E5%85%B1%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/" class="article-date">
  <time class="dt-published" datetime="2023-10-21T15:08:26.000Z" itemprop="datePublished">2023-10-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E7%BB%8F%E9%AA%8C/">技术经验</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/21/%E5%85%AC%E5%85%B1%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/">公共字段自动填充</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在做项目的时候，很多数据库表会有<font color="red">相同字段</font>，例如很多表都会记下数据的<font color="red">创造时间、修改时间、创造者、修改者</font>，便于后期维护。如果每次对数据的增加和修改操作都需要手动添加后修改这些字段，则会有大量的相同代码，也影响了代码的可读性。为此，我们可以利用<font color="red">反射机制和AOP（面向切面编程）</font>，对这些公共字段进行<font color="red">统一处理</font></p>
<br>

<img src="/2023/10/21/%E5%85%AC%E5%85%B1%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/20231021231450.png" style="zoom:67%;">

<img src="/2023/10/21/%E5%85%AC%E5%85%B1%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/20231021231417.png" style="zoom: 67%;">

<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">含义</th>
<th align="center">数据类型</th>
<th align="center">操作</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">创建时间</td>
<td align="center">datetime</td>
<td align="center">insert</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">创建人id</td>
<td align="center">bigint</td>
<td align="center">insert</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">修改时间</td>
<td align="center">datetime</td>
<td align="center">insert、update</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">修改人id</td>
<td align="center">bigint</td>
<td align="center">insert、update</td>
</tr>
</tbody></table>
<p><strong>解决方案</strong></p>
<ul>
<li>自定义注解AutoFill，用于标识需要进行公共字段自动填充的方法</li>
<li>自定义切面类AutoFillAspect，统一拦截加入了AutoFill注解的方法，通过反射为公共字段赋值</li>
<li>在Mapper的方法上加入AutoFill注解</li>
</ul>
<p>技术点： 枚举、注解、AOP、反射</p>
<br>



<p><strong>自定义注解AutoFill</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 自定义注解，用于识别某个方法需要进行功能字段自动填充</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoFill &#123;</span><br><span class="line">    <span class="comment">// 指定数据库操作的类型   update  insert</span></span><br><span class="line">    OperationType <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据库操作类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">OperationType</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    UPDATE,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    INSERT</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>OperationType 是自定义的枚举类</p>
<p>@Target 和 @Retention，可以用来修饰注解，是注解的注解，被称为元注解</p>
<p><strong>@Target :  目标，即该注解可以声明在哪些目标元素之前，也可理解为注释类型的程序元素的种类</strong></p>
<ul>
<li>ElementType.PACKAGE：该注解只能声明在一个包名前</li>
<li>ElementType.ANNOTATION_TYPE：该注解只能声明在一个注解类型前</li>
<li>ElementType.TYPE：该注解只能声明在一个类前</li>
<li>ElementType.CONSTRUCTOR：该注解只能声明在一个类的构造方法前</li>
<li>ElementType.LOCAL_VARIABLE：该注解只能声明在一个局部变量前</li>
<li>ElementType.METHOD：该注解只能声明在一个类的方法前</li>
<li>ElementType.PARAMETER：该注解只能声明在一个方法参数前</li>
<li>ElementType.FIELD：该注解只能声明在一个类的字段前</li>
</ul>
<p>**@Retention ：保留，可以理解为如何保留，即告诉编译程序如何处理，也可理解为注解类的生命周期 **</p>
<ul>
<li>RetentionPolicy.SOURCE  : 注解只保留在源文件，当Java文件编译成class文件的时候，注解被遗弃</li>
<li>RetentionPolicy.CLASS  : 注解被保留到class文件，但jvm加载class文件时候被遗弃，这是默认的生命周期</li>
<li>RetentionPolicy.RUNTIME  : 注解不仅被保存到class文件中，jvm加载class文件之后，仍然存在</li>
</ul>
<br>



<p><strong>自定义切面类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">**</span><br><span class="line"> * <span class="meta">@description</span>: 自定义切面</span><br><span class="line"> */</span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoFillAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: 切入点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.sky.annotation.AutoFill)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFillPointCut</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: 前置通知</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(&quot;autoFillPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFill</span><span class="params">(JoinPoint joinPoint)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;开始进行公共字段自动填充---&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取到当前被拦截的方法上的数据库操作类型</span></span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) joinPoint.getSignature(); <span class="comment">// 方法签名对象</span></span><br><span class="line">        <span class="type">AutoFill</span> <span class="variable">autoFill</span> <span class="operator">=</span> signature.getMethod().getAnnotation(AutoFill.class); <span class="comment">// 获得方法上的注解对象</span></span><br><span class="line">        <span class="type">OperationType</span> <span class="variable">operationType</span> <span class="operator">=</span> autoFill.value(); <span class="comment">// 获得数据库操作类型</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取到当前被拦截的方法的参数--实体对象</span></span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        <span class="keyword">if</span> (args == <span class="literal">null</span> || args.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">entity</span> <span class="operator">=</span> args[<span class="number">0</span>]; <span class="comment">// 在写新增和修改方法时，把实体放在第一个参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 准备赋值的数据</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="type">Long</span> <span class="variable">currentId</span> <span class="operator">=</span> BaseContext.getCurrentId();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据当前不同的操作类型，为对应的属性通过反射来赋值</span></span><br><span class="line">        <span class="keyword">if</span> (operationType == OperationType.INSERT) &#123;</span><br><span class="line">            <span class="comment">// 为4个字段赋值</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setCreateTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_CREATE_TIME, LocalDateTime.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_TIME, LocalDateTime.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_USER, Long.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setCreateUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_CREATE_USER, Long.class);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 通过反射为对象属性赋值</span></span><br><span class="line">                setCreateTime.invoke(entity,now);</span><br><span class="line">                setCreateUser.invoke(entity,currentId);</span><br><span class="line">                setUpdateTime.invoke(entity,now);</span><br><span class="line">                setUpdateUser.invoke(entity,currentId);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (operationType == OperationType.UPDATE) &#123;</span><br><span class="line">            <span class="comment">// 为2个字段赋值</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_TIME, LocalDateTime.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_USER, Long.class);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 通过反射为对象属性赋值</span></span><br><span class="line">                setUpdateTime.invoke(entity,now);</span><br><span class="line">                setUpdateUser.invoke(entity,currentId);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在执行update和save方法前就需要对公共字段赋值，所以这里使用的是前置通知<br>@Pointcut(“@annotation(com.sky.annotation.AutoFill)”)，com.sky.annotation.AutoFill 是自定义注解AutoFill类的位置<br>update方法只需要为2个公共字段赋值，save方法需要为4个公共字段赋值</p>
<br>



<p><strong>在Mapper的方法上加入AutoFill注解</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoFill(value = OperationType.INSERT)</span></span><br><span class="line"><span class="meta">@Insert(&quot;insert into employee (name, username, password, phone, sex, id_number, status, create_time, update_time, create_user, update_user) &quot; +</span></span><br><span class="line"><span class="meta">            &quot;values &quot; +</span></span><br><span class="line"><span class="meta">            &quot;(#&#123;name&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;phone&#125;,#&#123;sex&#125;,#&#123;idNumber&#125;,#&#123;status&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;,#&#123;createUser&#125;,#&#123;updateUser&#125;)&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@AutoFill(value = OperationType.UPDATE)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Employee employee)</span>;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/10/21/%E5%85%AC%E5%85%B1%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/" data-id="clywa1f4n0028ecve91yh4aoj" data-title="公共字段自动填充" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Lambda表达式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/18/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2023-10-18T05:51:54.000Z" itemprop="datePublished">2023-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/18/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/">Lambda表达式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1-什么是Lambda表达式"><a href="#1-什么是Lambda表达式" class="headerlink" title="1. 什么是Lambda表达式"></a>1. 什么是Lambda表达式</h3><p>Lambda表达式是一个<font color="red">匿名函数</font>,我们可以把Lambda表达式理解为是<font color="red">一段可以传递的代码</font>(将代码像数据一样传递)。使用它可以写出更简洁、更灵活的代码。作为一种更紧凑的代码风格，使Java的语言表达能力得到了提升</p>
<br>

<p><strong>简单案例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(o1, o2) -&gt; Integer.compare(o1, o2);</span><br></pre></td></tr></table></figure>



<p><strong>格式</strong></p>
<p>-&gt;	:	lambda操作符或箭头操作符<br>-&gt;的左边	:	lambda形参列表，对应着要重写的接口中的抽象方法的形参列表<br>-&gt;的右边	:	Lambda体，对应着接口的实现类要重写的方法的方法体</p>
<br>

<h3 id="2-Lambda表达式的语法"><a href="#2-Lambda表达式的语法" class="headerlink" title="2. Lambda表达式的语法"></a>2. Lambda表达式的语法</h3><p><strong>语法格式一：无参，无返回值</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">r1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小白学Java&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">r1. run();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;*************************&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Runnable</span> <span class="variable">r2</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">     System.out.println(<span class="string">&quot;小白学Lambda&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">r2.run();</span><br></pre></td></tr></table></figure>

<br>

<p><strong>语法格式二：需要一个传输，但是没有返回值</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    Consumer&lt;String&gt; con = <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accpet</span><span class="params">(String s)</span> &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">	con.accpet(<span class="string">&quot;谎言和誓言的区别是什么？&quot;</span>);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">&quot;*************************&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;</span><br><span class="line">   		System.out.println(s);</span><br><span class="line">	&#125;;</span><br><span class="line">	con1.accept(<span class="string">&quot;一个是说的人当真了，一个是听的人当真了&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p><strong>语法格式三：数据类型可以省略</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    Consumer&lt;String&gt; con = <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line">           System.out.println(s);</span><br><span class="line">	&#125;;</span><br><span class="line">	con.accpet(<span class="string">&quot;如果大学可以重来，你最想重来的事是什么？&quot;</span>);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">&quot;*************************&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Consumer&lt;String&gt; con1 = (s) -&gt; &#123;</span><br><span class="line">    	System.out.println(s);</span><br><span class="line">	&#125;;</span><br><span class="line">	con1.accept(<span class="string">&quot;多去其它地方玩玩，别一直搁长沙玩&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<br>

<p><strong>语法格式四：形参列表只有一个的时候，小括号也可以省略</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">	Consumer&lt;String&gt; con1 = s -&gt; &#123;</span><br><span class="line">    	System.out.println(s);</span><br><span class="line">	&#125;;</span><br><span class="line">	con1.accept(<span class="string">&quot;多去其它地方玩玩，别一直搁长沙玩&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<br>





<hr>
<h3 id="3-函数式接口"><a href="#3-函数式接口" class="headerlink" title="3. 函数式接口"></a>3. 函数式接口</h3><p><font color="red">如果接口中只声明有一个抽象方法，则此接口就称为函数式接口</font>，因为只有给函数式接口提供实现类对象时，我们才能使用Lambda表达式</p>
<p>jdk1.8中声明的函数式接口都在java.uti.function包下</p>
<br>

<p><strong>四大核心函数式接口</strong></p>
<table>
<thead>
<tr>
<th align="center">函数式接口</th>
<th align="center">称谓</th>
<th align="center">参数类型</th>
<th align="center">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Consumer<T></T></td>
<td align="center">消费型接口</td>
<td align="center">T</td>
<td align="center">对类型为T的对象应用操作，包含方法：void accept(T t)</td>
</tr>
<tr>
<td align="center">Supplier<T></T></td>
<td align="center">供给型接口</td>
<td align="center">无</td>
<td align="center">返回类型为T的对象，包括方法：T get()</td>
</tr>
<tr>
<td align="center">Function&lt;T,R&gt;</td>
<td align="center">函数型接口</td>
<td align="center">T</td>
<td align="center">对类型为T的对象应用操作，并返回结果。结果是R类型的对象，包含方法R apply(T t)</td>
</tr>
<tr>
<td align="center">Predicate<T></T></td>
<td align="center">判断型接口</td>
<td align="center">T</td>
<td align="center">确定类型为T的对象是否满足某约束，并返回boolean值，包含方法boolean test(T t)</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzhengjy.github.io/2023/10/18/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" data-id="clywa1f46000kecve8y4p59xl" data-title="Lambda表达式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Lambda/" rel="tag">Lambda</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JVM%E7%AF%87/">JVM篇</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E7%BB%8F%E9%AA%8C/">技术经验</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A1%86%E6%9E%B6%E5%92%8C%E4%B8%AD%E9%97%B4%E4%BB%B6/">框架和中间件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95%E7%AF%87/">面试篇</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lambda/" rel="tag">Lambda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/" rel="tag">Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MybatisPlus/" rel="tag">MybatisPlus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot3/" rel="tag">SpringBoot3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringCloud/" rel="tag">SpringCloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel/" rel="tag">excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" rel="tag">权限管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88/" rel="tag">集合</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Kafka/" style="font-size: 10px;">Kafka</a> <a href="/tags/Lambda/" style="font-size: 10px;">Lambda</a> <a href="/tags/MySQL/" style="font-size: 13.33px;">MySQL</a> <a href="/tags/Mybatis/" style="font-size: 10px;">Mybatis</a> <a href="/tags/MybatisPlus/" style="font-size: 10px;">MybatisPlus</a> <a href="/tags/RabbitMQ/" style="font-size: 13.33px;">RabbitMQ</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/SpringBoot3/" style="font-size: 10px;">SpringBoot3</a> <a href="/tags/SpringCloud/" style="font-size: 10px;">SpringCloud</a> <a href="/tags/excel/" style="font-size: 10px;">excel</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/redis/" style="font-size: 16.67px;">redis</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 13.33px;">前端</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 10px;">多线程</a> <a href="/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" style="font-size: 10px;">权限管理</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a> <a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 10px;">集合</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/07/19/xxl-job/">xxl-job</a>
          </li>
        
          <li>
            <a href="/2024/07/01/ElasticSearch/">ElasticSearch</a>
          </li>
        
          <li>
            <a href="/2024/06/20/%E9%80%9A%E8%BF%87JWT%E5%AE%9E%E7%94%9F%E6%88%90Token/">通过JWT实生成Token</a>
          </li>
        
          <li>
            <a href="/2024/06/14/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">分布式事务的解决方案</a>
          </li>
        
          <li>
            <a href="/2024/06/10/%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97/">延时队列</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Zheng<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>